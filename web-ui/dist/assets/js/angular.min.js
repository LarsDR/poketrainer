angular.module("poketrainer",["poketrainer.Module.Templates","Poketrainer.Module.SocketEventEmitter","Poketrainer.Service.Navigation","Poketrainer.Service.SocketEvent","Poketrainer.Service.Socket","Poketrainer.State.Abstracts","Poketrainer.State.Status","Poketrainer.State.Users","ui.router","ngMaterial","ngMessages"]).config(["$urlRouterProvider","$locationProvider","$urlMatcherFactoryProvider","$mdThemingProvider",function(e,t,o,n){e.rule(function(e,t){var o=t.url().toLowerCase();if(!("/"===o[o.length-1]||o.indexOf("/?")>-1))return o.indexOf("?")>-1?o.replace("?","/?"):o+"/"}).otherwise("/"),o.strictMode(!1),n.theme("default").primaryPalette("blue").accentPalette("red")}]).run(["$state","$rootScope","$document",function(e,t,o){t.$on("inventory:updated",function(e,t){}),t.$on("$stateChangeStart",function(){o.find(".screen-loading-overlay").removeClass("hidden")}),t.$on("$stateChangeSuccess",function(){o.find(".screen-loading-overlay").addClass("hidden")}),t.$on("$stateChangeError",function(t,n,r,a,i,s){"offline"===s&&(e.go("public.users"),o.find(".screen-loading-overlay").removeClass("hidden"))})}]),angular.module("Poketrainer.Module.SocketEventEmitter",["Poketrainer.Service.Socket"]).run(["$rootScope","PokeSocket","SocketEvent",function(e,t,o){t.forward(o.UserStatus),t.on(o.Data,function(t){e.$broadcast(t.event+":"+t.action,t.data)})}]),angular.module("Poketrainer.State.Abstracts",["ui.router"]).config(["$stateProvider",function(e){e.state("public",{"abstract":!0,views:{header:{templateUrl:"states/abstracts/header.tpl.html",controller:"HeaderController"},content:{template:"<ui-view/>"}}})}]).controller("HeaderController",["$rootScope","$scope","$state","Navigation",function(e,t,o,n){t.navigation=n.primary.get(),t.state=o.current.name,e.$on("$stateChangeSuccess",function(e,o,n,r,a){t.state=o.name})}]),angular.module("Poketrainer.State.Users",["ui.router"]).config(["$stateProvider",function(e){e.state("public.users",{url:"/",resolve:{Users:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,o,n){var r=e.defer(),a=function i(e){!angular.isUndefined(e)&&e.success&&angular.isArray(e.users)&&(o.removeListener(n.UserList,i),r.resolve(e.users))};return o.on(n.UserList,a),o.emit(n.UserList),r.promise}]},controller:"UsersController",templateUrl:"states/users/users.tpl.html"})}]).run(["Navigation",function(e){e.primary.register("Users","public.users",30,"md md-event-available","public.users")}]).controller("UsersController",["$scope","Users","PokeSocket","SocketEvent",function(e,t,o,n){e.users=t;var r=function(t,o){for(var n=0;n<e.users.length;n++)e.users[n].username==o.username&&(e.users[n].status=o.status)};e.$on(n._prefix+n.UserStatus,r)}]),angular.module("Poketrainer.State.Status",["ui.router","uiGmapgoogle-maps","chart.js","easypiechart","datatables","ui-leaflet","nemLogging"]).config(["$stateProvider","uiGmapGoogleMapApiProvider",function(e,t){t.configure({v:"3.24",libraries:"weather,geometry,visualization"}),e.state("public.dashboard",{url:"/dashboard/:username",resolve:{locationData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,o,n){var r=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"location"==e.type)return e.success?void r.resolve(angular.fromJson(e.data)):void r.reject("offline")};return o.on(n.Request,a),o.emit(n.Request,{username:t.username,types:["location"]}),r.promise}],inventoryData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,o,n){var r=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"inventory"==e.type)return e.success?void r.resolve(angular.fromJson(e.data)):void r.reject("offline")};return o.on(n.Request,a),o.emit(n.Request,{username:t.username,types:["inventory"]}),r.promise}],playerData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,o,n){var r=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"player"==e.type)return e.success?void r.resolve(angular.fromJson(e.data)):void r.reject("offline")};return o.on(n.Request,a),o.emit(n.Request,{username:t.username,types:["player"]}),r.promise}],playerStatsData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,o,n){var r=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"player_stats"==e.type)return e.success?void r.resolve(angular.fromJson(e.data)):void r.reject("offline")};return o.on(n.Request,a),o.emit(n.Request,{username:t.username,types:["player_stats"]}),r.promise}],pokemonData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,o,n){var r=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"pokemon"==e.type)return e.success?void r.resolve(angular.fromJson(e.data)):void r.reject("offline")};return o.on(n.Request,a),o.emit(n.Request,{username:t.username,types:["pokemon"]}),r.promise}],attacksData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,o,n){var r=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"attacks"==e.type)return e.success?void r.resolve(angular.fromJson(e.data)):void r.reject("offline")};return o.on(n.Request,a),o.emit(n.Request,{username:t.username,types:["attacks"]}),r.promise}]},controller:"DashboardController",templateUrl:"states/dashboard/dashboard.tpl.html"})}]).run(["Navigation",function(e){e.primary.register("Users","public.users",30,"md md-event-available","public.users")}]).controller("DashboardController",["$scope","$stateParams","$mdToast","PokeSocket","leafletData","locationData","inventoryData","playerData","playerStatsData","pokemonData","attacksData","SocketEvent","DTOptionsBuilder",function(e,t,o,n,r,a,i,s,l,u,c,p,d){var m=function(e,o){t.username==o.username&&"offline"==o.status&&$state.go("public.users")};e.$on(p._prefix+p.UserStatus,m),e.$on("$destroy",function(){n.emit(p.Leave,{room:t.username})}),n.emit(p.Join,{room:t.username});var v,f=function h(t){if(e.evolve_disabled=!1,e.transfer_disabled=!1,t.success)for(var r=e.pokemon.length-1;r>=0;r--)e.pokemon[r].id==v&&e.pokemon.splice(r,1);v=0,n.removeListener(p.Transfer,h),o.show(o.simple().textContent(t.message).position("top center").hideDelay(3e3))};e.transfer_disabled=!1,e.transfer=function(o){v=o,e.evolve_disabled=!0,e.transfer_disabled=!0,n.on(p.Transfer,f),n.emit(p.Transfer,{username:t.username,p_id:o})};var k=function $(t){e.evolve_disabled=!1,e.transfer_disabled=!1,n.removeListener(p.Evolve,$),o.show(o.simple().textContent(t.message).position("top center").hideDelay(3e3))};e.evolve_disabled=!1,e.evolve=function(o){e.evolve_disabled=!0,e.transfer_disabled=!0,n.on(p.Evolve,k),n.emit(p.Evolve,{username:t.username,p_id:o})};var g=function b(t){e.snipe_disabled=!1,n.removeListener(p.Snipe,b),o.show(o.simple().textContent(t.message).position("top center").hideDelay(3e3))};e.snipe_coords="",e.snipe_disabled=!1,e.snipe_auto=!1,e.snipe=function(o){e.snipe_disabled=!0,n.on(p.Snipe,g),n.emit(p.Snipe,{username:t.username,latlng:o})},e.$on("inventory:updated",function(t,o){e.inventory=o,S()}),e.$on("player_stats:updated",function(t,o){e.playerStats=o,S()}),e.$on("player:updated",function(t,o){e.player=o,S()}),e.$on("pokemon:caught",function(t,n){var r=n;e.pokemon.push(r),S(),o.show(o.simple().textContent("Caught: "+r.name+" (IV: "+Math.floor(r.iv)+" | CP: "+r.cp+")").position("top center").hideDelay(3e3))}),e.$on("pokemon:released",function(t,n){for(var r=n,a=e.pokemon.length-1;a>=0;a--)e.pokemon[a].id==r.id&&e.pokemon.splice(a,1);S(),o.show(o.simple().textContent("Released: "+r.name+" (IV: "+Math.floor(r.iv)+" | CP: "+r.cp+")").position("top center").hideDelay(3e3))}),e.$on("pokemon:evolved",function(t,n){for(var r=n.old,a=n["new"],i=e.pokemon.length-1;i>=0;i--)e.pokemon[i].id==r.id&&e.pokemon.splice(i,1);e.pokemon.push(a),o.show(o.simple().textContent("Evolved: "+r.name+" to "+a.name+" (IV: "+Math.floor(a.iv)+" | CP: "+a.cp+")").position("top center").hideDelay(3e3))}),e.$on("fort:spun",function(e,t){o.show(o.simple().textContent("Fort spun, reward: "+t.reward).position("top center").hideDelay(3e3))});var y=0;e.$on("position:update",function(t,o){if(y++,y%5==0){e.markers.bot.lat=o[0],e.markers.bot.lng=o[1];var n={lat:o[0],lng:o[1]};e.paths.main.latlngs.push(n)}}),e.player=s,e.playerStats=l,e.inventory=i,e.pokemon=u,e.attacks=c;var S=function(){e.playerStats.xpPercent=Math.floor((e.playerStats.experience-e.playerStats.prev_level_xp)/(e.playerStats.next_level_xp-e.playerStats.prev_level_xp)*100),e.playerStats.uniquePokedexPercent=Math.floor(e.playerStats.unique_pokedex_entries/151*100),e.playerStats.pokemonInvPercent=Math.floor(e.pokemon.length/e.player.max_pokemon_storage*100),e.playerStats.itemsInvPercent=Math.floor(e.inventory.item_count/e.player.max_item_storage*100)};S(),e.$on("$viewContentLoaded",function(){r.getMap().then(function(e){setTimeout(function(){e.invalidateSize()},3e3)})}),e.map={center:{lat:a[0],lng:a[1],zoom:15}},e.markers={bot:{lat:a[0],lng:a[1],message:e.player.username,focus:!0,draggable:!1}},e.paths={main:{color:"#F44336",weight:4,latlngs:[{lat:a[0],lng:a[1]}]}},e.pokemonDataTableOptions=d.newOptions().withOption("order",[[0,"desc"]]).withOption("stateSave",!0),e.expLvlOptions={animate:{duration:1e3,enabled:!0},barColor:"#03A9F4",scaleColor:!1,lineWidth:10,lineCap:"circle"},e.uniquePokedexOptions={animate:{duration:1e3,enabled:!0},barColor:"#FFC107",scaleColor:!1,lineWidth:10,lineCap:"circle"},e.pokemonInvOptions={animate:{duration:1e3,enabled:!0},barColor:"#009688",scaleColor:!1,lineWidth:10,lineCap:"circle"},e.itemsInvOptions={animate:{duration:1e3,enabled:!0},barColor:"#F44336",scaleColor:!1,lineWidth:10,lineCap:"circle"}}]),angular.module("Poketrainer.Service.Navigation",[]).factory("Navigation",function(){var e=[],t=function(){return e.sort(function(e,t){var o=e.Priority-t.Priority;return 0===o?e.Label.localeCompare(t.Label):o})},o=function(t,o,n,r,a){"string"!=typeof r&&(r="md md-chevron-right"),"string"!=typeof a&&(a=o),("number"!=typeof n||n<0)&&(n=10),e.push({Label:t,State:o,ActiveState:a,Priority:n,Icon:r})};return{primary:{get:t,register:o}}}),angular.module("Poketrainer.Service.SocketEvent",[]).factory("SocketEvent",function(){return{_prefix:"socket:",UserList:"users",UserStatus:"user_status",Request:"pull",Data:"push",Join:"join",Leave:"leave",Transfer:"transfer",Evolve:"evolve",Snipe:"snipe"}}),angular.module("Poketrainer.Service.Socket",["btford.socket-io"]).factory("PokeSocket",["socketFactory","$location",function(e,t){var o=window.location.pathname.replace(/\/+$/g,"")+"/socket.io";return e({ioSocket:io.connect(window.location.protocol+"//"+window.location.host+"/poketrainer",{path:o})})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIm1vZHVsZXMvbW9kdWxlLlNvY2tldEV2ZW50RW1pdHRlci5qcyIsInN0YXRlcy9hYnN0cmFjdHMvc3RhdGUuYWJzdHJhY3RzLmpzIiwic3RhdGVzL3VzZXJzL3N0YXRlLnVzZXJzLmpzIiwic3RhdGVzL2Rhc2hib2FyZC9zdGF0ZS5kYXNoYm9hcmQuanMiLCJtb2R1bGVzL3NlcnZpY2VzL3NlcnZpY2UuTmF2aWdhdGlvbi5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlciIsIiRtZFRoZW1pbmdQcm92aWRlciIsInJ1bGUiLCIkaW5qZWN0b3IiLCIkbG9jYXRpb24iLCJwYXRoIiwidXJsIiwidG9Mb3dlckNhc2UiLCJsZW5ndGgiLCJpbmRleE9mIiwicmVwbGFjZSIsIm90aGVyd2lzZSIsInN0cmljdE1vZGUiLCJ0aGVtZSIsInByaW1hcnlQYWxldHRlIiwiYWNjZW50UGFsZXR0ZSIsInJ1biIsIiRzdGF0ZSIsIiRyb290U2NvcGUiLCIkZG9jdW1lbnQiLCIkb24iLCJldmVudCIsImRhdGEiLCJmaW5kIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInRvU3RhdGUiLCJ0b1BhcmFtcyIsImZyb21TdGF0ZSIsImZyb21QYXJhbXMiLCJlcnJvciIsImdvIiwiUG9rZVNvY2tldCIsIlNvY2tldEV2ZW50IiwiZm9yd2FyZCIsIlVzZXJTdGF0dXMiLCJvbiIsIkRhdGEiLCIkYnJvYWRjYXN0IiwiYWN0aW9uIiwiJHN0YXRlUHJvdmlkZXIiLCJzdGF0ZSIsImFic3RyYWN0Iiwidmlld3MiLCJoZWFkZXIiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJjb250ZW50IiwidGVtcGxhdGUiLCIkc2NvcGUiLCJOYXZpZ2F0aW9uIiwibmF2aWdhdGlvbiIsInByaW1hcnkiLCJnZXQiLCJjdXJyZW50IiwibmFtZSIsInJlc29sdmUiLCJVc2VycyIsIiRxIiwiJHN0YXRlUGFyYW1zIiwiZCIsImRlZmVyIiwidXNlckV2ZW50Q2IiLCJtZXNzYWdlIiwiaXNVbmRlZmluZWQiLCJzdWNjZXNzIiwiaXNBcnJheSIsInVzZXJzIiwicmVtb3ZlTGlzdGVuZXIiLCJVc2VyTGlzdCIsImVtaXQiLCJwcm9taXNlIiwicmVnaXN0ZXIiLCJ1c2VyRXZlbnRVcGRhdGUiLCJpIiwidXNlcm5hbWUiLCJzdGF0dXMiLCJfcHJlZml4IiwidWlHbWFwR29vZ2xlTWFwQXBpUHJvdmlkZXIiLCJjb25maWd1cmUiLCJ2IiwibGlicmFyaWVzIiwibG9jYXRpb25EYXRhIiwibG9jYXRpb25EYXRhQ2IiLCJ0eXBlIiwiZnJvbUpzb24iLCJyZWplY3QiLCJSZXF1ZXN0IiwidHlwZXMiLCJpbnZlbnRvcnlEYXRhIiwiaW52ZW50b3J5RGF0YUNiIiwicGxheWVyRGF0YSIsInBsYXllckRhdGFDYiIsInBsYXllclN0YXRzRGF0YSIsInBsYXllclN0YXRzRGF0YUNiIiwicG9rZW1vbkRhdGEiLCJwb2tlbW9uRGF0YUNiIiwiYXR0YWNrc0RhdGEiLCJhdHRhY2tzRGF0YUNiIiwiJG1kVG9hc3QiLCJsZWFmbGV0RGF0YSIsIkRUT3B0aW9uc0J1aWxkZXIiLCJMZWF2ZSIsInJvb20iLCJKb2luIiwidHJhbnNmZXJfcF9pZCIsInRyYW5zZmVyQ2IiLCJldm9sdmVfZGlzYWJsZWQiLCJ0cmFuc2Zlcl9kaXNhYmxlZCIsInBva2Vtb24iLCJpZCIsInNwbGljZSIsIlRyYW5zZmVyIiwic2hvdyIsInNpbXBsZSIsInRleHRDb250ZW50IiwicG9zaXRpb24iLCJoaWRlRGVsYXkiLCJ0cmFuc2ZlciIsInBfaWQiLCJldm9sdmVDYiIsIkV2b2x2ZSIsImV2b2x2ZSIsInNuaXBlZENiIiwic25pcGVfZGlzYWJsZWQiLCJTbmlwZSIsInNuaXBlX2Nvb3JkcyIsInNuaXBlX2F1dG8iLCJzbmlwZSIsImxhdGxuZyIsImludmVudG9yeSIsInVwZGF0ZVBlcmNlbnRhZ2VzIiwicGxheWVyU3RhdHMiLCJwbGF5ZXIiLCJwdXNoIiwiTWF0aCIsImZsb29yIiwiaXYiLCJjcCIsInBva2Vtb25fb2xkIiwib2xkIiwicG9rZW1vbl9uZXciLCJyZXdhcmQiLCJwb3NpdGlvblVwZGF0ZXMiLCJtYXJrZXJzIiwiYm90IiwibGF0IiwibG5nIiwibmV3TG9jYXRpb24iLCJwYXRocyIsIm1haW4iLCJsYXRsbmdzIiwiYXR0YWNrcyIsInhwUGVyY2VudCIsImV4cGVyaWVuY2UiLCJwcmV2X2xldmVsX3hwIiwibmV4dF9sZXZlbF94cCIsInVuaXF1ZVBva2VkZXhQZXJjZW50IiwidW5pcXVlX3Bva2VkZXhfZW50cmllcyIsInBva2Vtb25JbnZQZXJjZW50IiwibWF4X3Bva2Vtb25fc3RvcmFnZSIsIml0ZW1zSW52UGVyY2VudCIsIml0ZW1fY291bnQiLCJtYXhfaXRlbV9zdG9yYWdlIiwiZ2V0TWFwIiwidGhlbiIsIm1hcCIsInNldFRpbWVvdXQiLCJpbnZhbGlkYXRlU2l6ZSIsImNlbnRlciIsInpvb20iLCJmb2N1cyIsImRyYWdnYWJsZSIsImNvbG9yIiwid2VpZ2h0IiwicG9rZW1vbkRhdGFUYWJsZU9wdGlvbnMiLCJuZXdPcHRpb25zIiwid2l0aE9wdGlvbiIsImV4cEx2bE9wdGlvbnMiLCJhbmltYXRlIiwiZHVyYXRpb24iLCJlbmFibGVkIiwiYmFyQ29sb3IiLCJzY2FsZUNvbG9yIiwibGluZVdpZHRoIiwibGluZUNhcCIsInVuaXF1ZVBva2VkZXhPcHRpb25zIiwicG9rZW1vbkludk9wdGlvbnMiLCJpdGVtc0ludk9wdGlvbnMiLCJmYWN0b3J5IiwiaGVhZGVyTmF2IiwiZ2V0UHJpbWFyeU1lbnUiLCJzb3J0IiwiYSIsImIiLCJwcmlvcml0eSIsIlByaW9yaXR5IiwiTGFiZWwiLCJsb2NhbGVDb21wYXJlIiwicmVnaXN0ZXJQcmltYXJ5TWVudSIsImxhYmVsIiwiaWNvbiIsImFjdGl2ZVN0YXRlIiwiU3RhdGUiLCJBY3RpdmVTdGF0ZSIsIkljb24iLCJzb2NrZXRGYWN0b3J5Iiwid2luZG93IiwibG9jYXRpb24iLCJwYXRobmFtZSIsImlvU29ja2V0IiwiaW8iLCJjb25uZWN0IiwicHJvdG9jb2wiLCJob3N0Il0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBQUMsT0FBQSxlQUNBLCtCQUNBLHdDQUNBLGlDQUNBLGtDQUNBLDZCQUNBLDhCQUNBLDJCQUNBLDBCQUNBLFlBQ0EsYUFDQSxlQUNBQyxRQUNBLHFCQUNBLG9CQUNBLDZCQUNBLHFCQUNBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBSUFILEVBQUFJLEtBQUEsU0FBQUMsRUFBQUMsR0FDQSxHQUFBQyxHQUFBRCxFQUFBRSxNQUFBQyxhQUVBLE1BQUEsTUFBQUYsRUFBQUEsRUFBQUcsT0FBQSxJQUFBSCxFQUFBSSxRQUFBLFVBR0EsTUFBQUosR0FBQUksUUFBQSxRQUNBSixFQUFBSyxRQUFBLElBQUEsTUFFQUwsRUFBQSxNQUNBTSxVQUFBLEtBQ0FYLEVBQUFZLFlBQUEsR0FDQVgsRUFBQVksTUFBQSxXQUFBQyxlQUFBLFFBQUFDLGNBQUEsVUFFQUMsS0FDQSxTQUNBLGFBQ0EsWUFDQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUNBRCxFQUFBRSxJQUFBLG9CQUFBLFNBQUFDLEVBQUFDLE1BRUFKLEVBQUFFLElBQUEsb0JBQUEsV0FDQUQsRUFBQUksS0FBQSwyQkFBQUMsWUFBQSxZQUVBTixFQUFBRSxJQUFBLHNCQUFBLFdBQ0FELEVBQUFJLEtBQUEsMkJBQUFFLFNBQUEsWUFFQVAsRUFBQUUsSUFBQSxvQkFBQSxTQUFBQyxFQUFBSyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBLFlBQUFBLElBQ0FiLEVBQUFjLEdBQUEsZ0JBQ0FaLEVBQUFJLEtBQUEsMkJBQUFDLFlBQUEsZ0JBTUE3QixRQUFBQyxPQUFBLHlDQUFBLCtCQUFBb0IsS0FDQSxhQUNBLGFBQ0EsY0FDQSxTQUFBRSxFQUFBYyxFQUFBQyxHQUNBRCxFQUFBRSxRQUFBRCxFQUFBRSxZQUNBSCxFQUFBSSxHQUFBSCxFQUFBSSxLQUFBLFNBQUFmLEdBRUFKLEVBQUFv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Q0FHLE1BQUFsSyxFQUNBbUssWUFBQUYsRUFDQU4sU0FBQUQsRUFDQVUsS0FBQUosSUFHQSxRQUNBckosU0FDQUMsSUFBQTBJLEVBQ0F2SCxTQUFBK0gsTUFJQTVNLFFBQUFDLE9BQUEsc0NBQUFpTSxRQUFBLGNBQUEsV0MvYkEsT0FDQWhILFFBQUEsVUFDQVIsU0FBQSxRQUNBbEMsV0FBQSxjQUNBb0QsUUFBQSxPQUNBbEQsS0FBQSxPQUNBbUUsS0FBQSxPQUNBRixNQUFBLFFBQ0FVLFNBQUEsV0FDQVMsT0FBQSxTQUNBSSxNQUFBLFdBR0FsSSxRQUFBQyxPQUFBLDhCQUFBLHFCQUFBaU0sUUFBQSxjQUNBLGdCQUNBLFlBQ0EsU0FBQWlCLEVBQUExTSxHQUNBLEdBQUFDLEdBQUEwTSxPQUFBQyxTQUFBQyxTQUFBdk0sUUFBQSxRQUFBLElBQUEsWUFFQSxPQUFBb00sSUFBQUksU0FBQUMsR0FBQUMsUUFBQUwsT0FBQUMsU0FBQUssU0FBQSxLQUFBTixPQUFBQyxTQUFBTSxLQUFBLGdCQUFBak4sS0FBQUEiLCJmaWxlIjoiYW5ndWxhci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgncG9rZXRyYWluZXInLCBbXG5cdCdwb2tldHJhaW5lci5Nb2R1bGUuVGVtcGxhdGVzJyxcblxuXHQvKiogSW50ZXJuYWwgTW9kdWxlcyAqKi9cblx0J1Bva2V0cmFpbmVyLk1vZHVsZS5Tb2NrZXRFdmVudEVtaXR0ZXInLFxuXG5cdC8qKiBJbnRlcm5hbCBTZXJ2aWNlcyAqKi9cblx0J1Bva2V0cmFpbmVyLlNlcnZpY2UuTmF2aWdhdGlvbicsXG5cdCdQb2tldHJhaW5lci5TZXJ2aWNlLlNvY2tldEV2ZW50Jyxcblx0J1Bva2V0cmFpbmVyLlNlcnZpY2UuU29ja2V0JyxcblxuXHQvKiogU3RhdGVzL1JvdXRlcyAqKi9cblx0J1Bva2V0cmFpbmVyLlN0YXRlLkFic3RyYWN0cycsXG5cdCdQb2tldHJhaW5lci5TdGF0ZS5TdGF0dXMnLFxuXHQnUG9rZXRyYWluZXIuU3RhdGUuVXNlcnMnLFxuXG5cblx0LyoqIEV4dGVybmFsIExpYnMgKiovXG5cdCd1aS5yb3V0ZXInLFxuICAgICduZ01hdGVyaWFsJyxcbiAgICAnbmdNZXNzYWdlcydcblxuXHQvKiogSW50ZXJuYWwgRGlyZWN0aXZlcyAqKi9cblx0XG5dKVxuXG5cdC5jb25maWcoZnVuY3Rpb24gcG9rZVRyYWluZXJDb25maWcoJHVybFJvdXRlclByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlciwgJHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXIsICRtZFRoZW1pbmdQcm92aWRlcikge1xuXHRcdC8vJGxvY2F0aW9uUHJvdmlkZXJcblx0XHQvL1x0Lmhhc2hQcmVmaXgoJyEnKVxuXHRcdC8vXHQuaHRtbDVNb2RlKGZhbHNlKTtcblxuXHRcdCR1cmxSb3V0ZXJQcm92aWRlci5ydWxlKGZ1bmN0aW9uICgkaW5qZWN0b3IsICRsb2NhdGlvbikge1xuXHRcdFx0dmFyIHBhdGggPSAkbG9jYXRpb24udXJsKCkudG9Mb3dlckNhc2UoKTtcblxuXHRcdFx0Ly8gY2hlY2sgdG8gc2VlIGlmIHRoZSBwYXRoIGFscmVhZHkgaGFzIGEgc2xhc2ggd2hlcmUgaXQgc2hvdWxkIGJlXG5cdFx0XHRpZiAocGF0aFtwYXRoLmxlbmd0aCAtIDFdID09PSAnLycgfHwgcGF0aC5pbmRleE9mKCcvPycpID4gLTEpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAocGF0aC5pbmRleE9mKCc/JykgPiAtMSkge1xuXHRcdFx0XHRyZXR1cm4gcGF0aC5yZXBsYWNlKCc/JywgJy8/Jyk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBwYXRoICsgJy8nO1xuXHRcdH0pXG5cdFx0Lm90aGVyd2lzZSgnLycpO1xuXG5cdFx0JHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXIuc3RyaWN0TW9kZShmYWxzZSk7XG5cbiAgICAgICAgJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdkZWZhdWx0JylcbiAgICAgICAgICAgIC5wcmltYXJ5UGFsZXR0ZSgnYmx1ZScpXG4gICAgICAgICAgICAuYWNjZW50UGFsZXR0ZSgncmVkJyk7XG5cblx0fSlcblxuXHQucnVuKGZ1bmN0aW9uIHBva2VUcmFpbmVyUnVuICgkc3RhdGUsICRyb290U2NvcGUsICRkb2N1bWVudCkge1xuXHRcdCRyb290U2NvcGUuJG9uKCdpbnZlbnRvcnk6dXBkYXRlZCcsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKXtcblx0XHRcdC8vY29uc29sZS5sb2coXCJJbnZlbnRvcnkhISA6RCBcIilcblx0XHR9KTtcblx0XHQkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbigpe1xuXHRcdFx0JGRvY3VtZW50LmZpbmQoJy5zY3JlZW4tbG9hZGluZy1vdmVybGF5JykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuXHRcdH0pO1xuXHRcdCRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24oKXtcblx0XHRcdCRkb2N1bWVudC5maW5kKCcuc2NyZWVuLWxvYWRpbmctb3ZlcmxheScpLmFkZENsYXNzKCdoaWRkZW4nKTtcblx0XHR9KTtcblx0XHQkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlRXJyb3InLCBmdW5jdGlvbiAoZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMsIGVycm9yKSB7XG5cdFx0XHRpZiAoZXJyb3IgPT09IFwib2ZmbGluZVwiKSB7XG5cdFx0XHRcdCRzdGF0ZS5nbyhcInB1YmxpYy51c2Vyc1wiKTtcblx0XHRcdFx0JGRvY3VtZW50LmZpbmQoJy5zY3JlZW4tbG9hZGluZy1vdmVybGF5JykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KVxuXG47IiwiYW5ndWxhci5tb2R1bGUoJ1Bva2V0cmFpbmVyLk1vZHVsZS5Tb2NrZXRFdmVudEVtaXR0ZXInLCBbJ1Bva2V0cmFpbmVyLlNlcnZpY2UuU29ja2V0J10pXG4gICAgLnJ1bihmdW5jdGlvbiBydW5Tb2NrZXRFbWl0dGVyKCRyb290U2NvcGUsIFBva2VTb2NrZXQsIFNvY2tldEV2ZW50KXtcblxuICAgICAgICBQb2tlU29ja2V0LmZvcndhcmQoU29ja2V0RXZlbnQuVXNlclN0YXR1cyk7XG5cbiAgICAgICAgUG9rZVNvY2tldC5vbihTb2NrZXRFdmVudC5EYXRhLCBmdW5jdGlvbiBnZXRTb2NrZXRQdXNoKGRhdGEpe1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkdvdCBwdXNoIGRhdGE6IFwiLCBkYXRhKTtcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdChkYXRhLmV2ZW50ICsgXCI6XCIgKyBkYXRhLmFjdGlvbiwgZGF0YS5kYXRhKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQnJvYWRjYXN0IGV2ZW50cyB1c2luZyAkcm9vdFNjb3BlLiRicm9hZGNhc3QoW25hbWVdLCBbZGF0YV0pO1xuICAgIH0pXG5cbjsiLCJhbmd1bGFyLm1vZHVsZSgnUG9rZXRyYWluZXIuU3RhdGUuQWJzdHJhY3RzJywgW1xuICAgICd1aS5yb3V0ZXInXG5dKVxuXG4gICAgLmNvbmZpZyhmdW5jdGlvbiBjb25maWcoJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC5zdGF0ZSgncHVibGljJywge1xuICAgICAgICAgICAgICAgIGFic3RyYWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgICAgICAgICAgIFwiaGVhZGVyXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGVzL2Fic3RyYWN0cy9oZWFkZXIudHBsLmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0hlYWRlckNvbnRyb2xsZXInXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIFwiY29udGVudFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzx1aS12aWV3Lz4nXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICA7XG4gICAgfSlcblxuICAgIC5jb250cm9sbGVyKCdIZWFkZXJDb250cm9sbGVyJywgZnVuY3Rpb24gSGVhZGVyQ29udHJvbGxlcigkcm9vdFNjb3BlLCAkc2NvcGUsICRzdGF0ZSwgTmF2aWdhdGlvbil7XG4gICAgICAgICRzY29wZS5uYXZpZ2F0aW9uID0gTmF2aWdhdGlvbi5wcmltYXJ5LmdldCgpO1xuICAgICAgICAkc2NvcGUuc3RhdGUgPSAkc3RhdGUuY3VycmVudC5uYW1lO1xuXG4gICAgICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24gKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zKSB7XG4gICAgICAgICAgICAkc2NvcGUuc3RhdGUgPSB0b1N0YXRlLm5hbWU7XG4gICAgICAgIH0pO1xuICAgIH0pXG5cbjsiLCJhbmd1bGFyLm1vZHVsZSgnUG9rZXRyYWluZXIuU3RhdGUuVXNlcnMnLCBbXG4gICAgJ3VpLnJvdXRlcidcbl0pXG5cbiAgICAuY29uZmlnKGZ1bmN0aW9uIGNvbmZpZygkc3RhdGVQcm92aWRlcikge1xuICAgICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgncHVibGljLnVzZXJzJywge1xuICAgICAgICAgICAgdXJsOiAnLycsXG4gICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgICAgVXNlcnM6IFsnJHEnLCAnJHN0YXRlUGFyYW1zJywgJ1Bva2VTb2NrZXQnLCAnU29ja2V0RXZlbnQnLCBmdW5jdGlvbiByZXNvbHZlVXNlcnMoJHEsICRzdGF0ZVBhcmFtcywgUG9rZVNvY2tldCwgU29ja2V0RXZlbnQpe1xuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXJFdmVudENiID0gZnVuY3Rpb24gdXNlckV2ZW50Q2IobWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZChtZXNzYWdlKSB8fCAhbWVzc2FnZS5zdWNjZXNzIHx8ICFhbmd1bGFyLmlzQXJyYXkobWVzc2FnZS51c2Vycykpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQucmVtb3ZlTGlzdGVuZXIoU29ja2V0RXZlbnQuVXNlckxpc3QsIHVzZXJFdmVudENiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGQucmVzb2x2ZShtZXNzYWdlLnVzZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LlVzZXJMaXN0LCB1c2VyRXZlbnRDYik7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gRW1pdCB0aGUgZXZlbnQgdG8gb3VyIHNvY2tldFxuICAgICAgICAgICAgICAgICAgICAvLyBhZnRlciBsaXN0ZW5pbmcgZm9yIGl0LlxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBkb24ndCBuZWVkIHRvIHNpbmNlIHdlIGNvbm5lY3QgYW55d2F5LCBhbnkgaXNzdWVzP1xuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBlbmVkIGl0IHRvIGdldCBiYWNrIHRvIHRoZSBib3RzLW92ZXJ2aWV3P1xuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuVXNlckxpc3QpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnByb21pc2U7XG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnVXNlcnNDb250cm9sbGVyJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGVzL3VzZXJzL3VzZXJzLnRwbC5odG1sJ1xuICAgICAgICB9KVxuICAgICAgICA7XG4gICAgfSlcblxuICAgIC5ydW4oZnVuY3Rpb24gKE5hdmlnYXRpb24pIHtcbiAgICAgICAgTmF2aWdhdGlvbi5wcmltYXJ5LnJlZ2lzdGVyKFwiVXNlcnNcIiwgXCJwdWJsaWMudXNlcnNcIiwgMzAsICdtZCBtZC1ldmVudC1hdmFpbGFibGUnLCAncHVibGljLnVzZXJzJyk7XG4gICAgfSlcblxuICAgIC5jb250cm9sbGVyKCdVc2Vyc0NvbnRyb2xsZXInLCBmdW5jdGlvbiBVc2Vyc0NvbnRyb2xsZXIoJHNjb3BlLCBVc2VycywgUG9rZVNvY2tldCwgU29ja2V0RXZlbnQpIHtcbiAgICAgICAgLy8gd2UgZG9uJ3QgbmVlZCBhbnkgZGF0YSBmcm9tIHRoZSBnbG9iYWwgc2NvcGUgaGVyZS4uLiB5ZXQ/XG4gICAgICAgIC8vUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LkpvaW4sIHtyb29tOiAnZ2xvYmFsJ30pO1xuICAgICAgICAkc2NvcGUudXNlcnMgPSBVc2VycztcblxuICAgICAgICB2YXIgdXNlckV2ZW50VXBkYXRlID0gZnVuY3Rpb24gdXNlckV2ZW50VXBkYXRlKGV2ZW50LCBtZXNzYWdlKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS51c2Vycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUudXNlcnNbaV0udXNlcm5hbWUgPT0gbWVzc2FnZS51c2VybmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXNlcnNbaV0uc3RhdHVzID0gbWVzc2FnZS5zdGF0dXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0byBsaXN0ZW4gZm9yIG5ldyBldmVudHNcbiAgICAgICAgJHNjb3BlLiRvbihTb2NrZXRFdmVudC5fcHJlZml4ICsgU29ja2V0RXZlbnQuVXNlclN0YXR1cywgdXNlckV2ZW50VXBkYXRlKTtcbiAgICB9KVxuO1xuIiwiYW5ndWxhci5tb2R1bGUoJ1Bva2V0cmFpbmVyLlN0YXRlLlN0YXR1cycsIFtcclxuICAgICd1aS5yb3V0ZXInLFxyXG4gICAgJ3VpR21hcGdvb2dsZS1tYXBzJyxcclxuICAgICdjaGFydC5qcycsXHJcbiAgICAnZWFzeXBpZWNoYXJ0JyxcclxuICAgICdkYXRhdGFibGVzJyxcclxuICAgICd1aS1sZWFmbGV0JyxcclxuICAgICduZW1Mb2dnaW5nJ1xyXG5dKVxyXG5cclxuICAgIC5jb25maWcoZnVuY3Rpb24gY29uZmlnKCRzdGF0ZVByb3ZpZGVyLCB1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlcikge1xyXG5cclxuICAgICAgICB1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlci5jb25maWd1cmUoe1xyXG4gICAgICAgICAgICAvL2tleTogJzxNQVBTIEFQSSBLRVk+JyxcclxuICAgICAgICAgICAgdjogJzMuMjQnLFxyXG4gICAgICAgICAgICBsaWJyYXJpZXM6ICd3ZWF0aGVyLGdlb21ldHJ5LHZpc3VhbGl6YXRpb24nXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdwdWJsaWMuZGFzaGJvYXJkJywge1xyXG4gICAgICAgICAgICB1cmw6ICcvZGFzaGJvYXJkLzp1c2VybmFtZScsXHJcbiAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uRGF0YTogWyckcScsICckc3RhdGVQYXJhbXMnLCAnUG9rZVNvY2tldCcsICdTb2NrZXRFdmVudCcsIGZ1bmN0aW9uIHJlc29sdmVMb2NhdGlvbkRhdGEoJHEsICRzdGF0ZVBhcmFtcywgUG9rZVNvY2tldCwgU29ja2V0RXZlbnQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9uRGF0YUNiID0gZnVuY3Rpb24gbG9jYXRpb25EYXRhQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKG1lc3NhZ2UpIHx8IG1lc3NhZ2UudHlwZSAhPSAnbG9jYXRpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQucmVqZWN0KCdvZmZsaW5lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZC5yZXNvbHZlKGFuZ3VsYXIuZnJvbUpzb24obWVzc2FnZS5kYXRhKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5vbihTb2NrZXRFdmVudC5SZXF1ZXN0LCBsb2NhdGlvbkRhdGFDYik7XHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlJlcXVlc3QsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXM6IFsnbG9jYXRpb24nXVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5wcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgICAgICBpbnZlbnRvcnlEYXRhOiBbJyRxJywgJyRzdGF0ZVBhcmFtcycsICdQb2tlU29ja2V0JywgJ1NvY2tldEV2ZW50JywgZnVuY3Rpb24gcmVzb2x2ZUludmVudG9yeURhdGEoJHEsICRzdGF0ZVBhcmFtcywgUG9rZVNvY2tldCwgU29ja2V0RXZlbnQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGludmVudG9yeURhdGFDYiA9IGZ1bmN0aW9uIGludmVudG9yeURhdGFDYihtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQobWVzc2FnZSkgfHwgbWVzc2FnZS50eXBlICE9ICdpbnZlbnRvcnknKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1lc3NhZ2Uuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5yZWplY3QoJ29mZmxpbmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkLnJlc29sdmUoYW5ndWxhci5mcm9tSnNvbihtZXNzYWdlLmRhdGEpKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LlJlcXVlc3QsIGludmVudG9yeURhdGFDYik7XHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlJlcXVlc3QsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXM6IFsnaW52ZW50b3J5J11cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQucHJvbWlzZTtcclxuICAgICAgICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgICAgICAgcGxheWVyRGF0YTogWyckcScsICckc3RhdGVQYXJhbXMnLCAnUG9rZVNvY2tldCcsICdTb2NrZXRFdmVudCcsIGZ1bmN0aW9uIHJlc29sdmVQbGF5ZXJEYXRhKCRxLCAkc3RhdGVQYXJhbXMsIFBva2VTb2NrZXQsIFNvY2tldEV2ZW50KXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9ICRxLmRlZmVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwbGF5ZXJEYXRhQ2IgPSBmdW5jdGlvbiBwbGF5ZXJEYXRhQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKG1lc3NhZ2UpIHx8IG1lc3NhZ2UudHlwZSAhPSAncGxheWVyJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQucmVqZWN0KCdvZmZsaW5lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZC5yZXNvbHZlKGFuZ3VsYXIuZnJvbUpzb24obWVzc2FnZS5kYXRhKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5vbihTb2NrZXRFdmVudC5SZXF1ZXN0LCBwbGF5ZXJEYXRhQ2IpO1xyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5SZXF1ZXN0LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAkc3RhdGVQYXJhbXMudXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVzOiBbJ3BsYXllciddXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgICAgIHBsYXllclN0YXRzRGF0YTogWyckcScsICckc3RhdGVQYXJhbXMnLCAnUG9rZVNvY2tldCcsICdTb2NrZXRFdmVudCcsIGZ1bmN0aW9uIHJlc29sdmVQbGF5ZXJTdGF0c0RhdGEoJHEsICRzdGF0ZVBhcmFtcywgUG9rZVNvY2tldCwgU29ja2V0RXZlbnQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXllclN0YXRzRGF0YUNiID0gZnVuY3Rpb24gcGxheWVyU3RhdHNEYXRhQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKG1lc3NhZ2UpIHx8IG1lc3NhZ2UudHlwZSAhPSAncGxheWVyX3N0YXRzJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQucmVqZWN0KCdvZmZsaW5lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZC5yZXNvbHZlKGFuZ3VsYXIuZnJvbUpzb24obWVzc2FnZS5kYXRhKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5vbihTb2NrZXRFdmVudC5SZXF1ZXN0LCBwbGF5ZXJTdGF0c0RhdGFDYik7XHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlJlcXVlc3QsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXM6IFsncGxheWVyX3N0YXRzJ11cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQucHJvbWlzZTtcclxuICAgICAgICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgICAgICAgcG9rZW1vbkRhdGE6IFsnJHEnLCAnJHN0YXRlUGFyYW1zJywgJ1Bva2VTb2NrZXQnLCAnU29ja2V0RXZlbnQnLCBmdW5jdGlvbiByZXNvbHZlUG9rZW1vbkRhdGEoJHEsICRzdGF0ZVBhcmFtcywgUG9rZVNvY2tldCwgU29ja2V0RXZlbnQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBva2Vtb25EYXRhQ2IgPSBmdW5jdGlvbiBwb2tlbW9uRGF0YUNiKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZChtZXNzYWdlKSB8fCBtZXNzYWdlLnR5cGUgIT0gJ3Bva2Vtb24nKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1lc3NhZ2Uuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5yZWplY3QoJ29mZmxpbmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkLnJlc29sdmUoYW5ndWxhci5mcm9tSnNvbihtZXNzYWdlLmRhdGEpKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LlJlcXVlc3QsIHBva2Vtb25EYXRhQ2IpO1xyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5SZXF1ZXN0LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAkc3RhdGVQYXJhbXMudXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVzOiBbJ3Bva2Vtb24nXVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5wcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgICAgICBhdHRhY2tzRGF0YTogWyckcScsICckc3RhdGVQYXJhbXMnLCAnUG9rZVNvY2tldCcsICdTb2NrZXRFdmVudCcsIGZ1bmN0aW9uIHJlc29sdmVBdHRhY2tzRGF0YSgkcSwgJHN0YXRlUGFyYW1zLCBQb2tlU29ja2V0LCBTb2NrZXRFdmVudCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSAkcS5kZWZlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXR0YWNrc0RhdGFDYiA9IGZ1bmN0aW9uIGF0dGFja3NEYXRhQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKG1lc3NhZ2UpIHx8IG1lc3NhZ2UudHlwZSAhPSAnYXR0YWNrcycpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWVzc2FnZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnJlamVjdCgnb2ZmbGluZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQucmVzb2x2ZShhbmd1bGFyLmZyb21Kc29uKG1lc3NhZ2UuZGF0YSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQub24oU29ja2V0RXZlbnQuUmVxdWVzdCwgYXR0YWNrc0RhdGFDYik7XHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlJlcXVlc3QsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXM6IFsnYXR0YWNrcyddXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgICB9XVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnRGFzaGJvYXJkQ29udHJvbGxlcicsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGVzL2Rhc2hib2FyZC9kYXNoYm9hcmQudHBsLmh0bWwnXHJcbiAgICAgICAgfSlcclxuICAgICAgICA7XHJcbiAgICB9KVxyXG5cclxuICAgIC5ydW4oZnVuY3Rpb24gKE5hdmlnYXRpb24pIHtcclxuICAgICAgICBOYXZpZ2F0aW9uLnByaW1hcnkucmVnaXN0ZXIoXCJVc2Vyc1wiLCBcInB1YmxpYy51c2Vyc1wiLCAzMCwgJ21kIG1kLWV2ZW50LWF2YWlsYWJsZScsICdwdWJsaWMudXNlcnMnKTtcclxuICAgIH0pXHJcblxyXG4gICAgLmNvbnRyb2xsZXIoJ0Rhc2hib2FyZENvbnRyb2xsZXInLCBmdW5jdGlvbiBEYXNoYm9hcmRDb250cm9sbGVyKCRzY29wZSwgJHN0YXRlUGFyYW1zLCAkbWRUb2FzdCwgUG9rZVNvY2tldCwgbGVhZmxldERhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25EYXRhLCBpbnZlbnRvcnlEYXRhLCBwbGF5ZXJEYXRhLCBwbGF5ZXJTdGF0c0RhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9rZW1vbkRhdGEsIGF0dGFja3NEYXRhLCBTb2NrZXRFdmVudCwgRFRPcHRpb25zQnVpbGRlcikge1xyXG4gICAgICAgIHZhciB1c2VyRXZlbnRVcGRhdGUgPSBmdW5jdGlvbiB1c2VyRXZlbnRVcGRhdGUoZXZlbnQsIG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgaWYgKCRzdGF0ZVBhcmFtcy51c2VybmFtZSA9PSBtZXNzYWdlLnVzZXJuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zdGF0dXMgPT0gJ29mZmxpbmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdwdWJsaWMudXNlcnMnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHNjb3BlLiRvbihTb2NrZXRFdmVudC5fcHJlZml4ICsgU29ja2V0RXZlbnQuVXNlclN0YXR1cywgdXNlckV2ZW50VXBkYXRlKTtcclxuXHJcbiAgICAgICAgJHNjb3BlLiRvbihcIiRkZXN0cm95XCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5MZWF2ZSwge3Jvb206ICRzdGF0ZVBhcmFtcy51c2VybmFtZX0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEpvaW4gc3BlY2lmaWMgdXNlciByb29tXHJcbiAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LkpvaW4sIHtyb29tOiAkc3RhdGVQYXJhbXMudXNlcm5hbWV9KTtcclxuXHJcbiAgICAgICAgLyoqIFRSQU5TRkVSICoqL1xyXG4gICAgICAgIHZhciB0cmFuc2Zlcl9wX2lkO1xyXG4gICAgICAgIHZhciB0cmFuc2ZlckNiID0gZnVuY3Rpb24gdHJhbnNmZXJDYihtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5ldm9sdmVfZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgJHNjb3BlLnRyYW5zZmVyX2Rpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaT0kc2NvcGUucG9rZW1vbi5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wb2tlbW9uW2ldLmlkID09IHRyYW5zZmVyX3BfaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBva2Vtb24uc3BsaWNlKGksMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRyYW5zZmVyX3BfaWQgPSAwO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0LnJlbW92ZUxpc3RlbmVyKFNvY2tldEV2ZW50LlRyYW5zZmVyLCB0cmFuc2ZlckNiKTtcclxuICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRleHRDb250ZW50KG1lc3NhZ2UubWVzc2FnZSlcclxuICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCBjZW50ZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgICRzY29wZS50cmFuc2Zlcl9kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS50cmFuc2ZlciA9IGZ1bmN0aW9uKHBfaWQpIHtcclxuICAgICAgICAgICAgdHJhbnNmZXJfcF9pZCA9IHBfaWQ7XHJcbiAgICAgICAgICAgICRzY29wZS5ldm9sdmVfZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAkc2NvcGUudHJhbnNmZXJfZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LlRyYW5zZmVyLCB0cmFuc2ZlckNiKTtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlRyYW5zZmVyLCB7dXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSwgcF9pZDogcF9pZH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKiBFVk9MVkUgKiovXHJcbiAgICAgICAgdmFyIGV2b2x2ZUNiID0gZnVuY3Rpb24gZXZvbHZlQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZXZvbHZlX2Rpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRzY29wZS50cmFuc2Zlcl9kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0LnJlbW92ZUxpc3RlbmVyKFNvY2tldEV2ZW50LkV2b2x2ZSwgZXZvbHZlQ2IpO1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQobWVzc2FnZS5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbigndG9wIGNlbnRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHNjb3BlLmV2b2x2ZV9kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5ldm9sdmUgPSBmdW5jdGlvbihwX2lkKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5ldm9sdmVfZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAkc2NvcGUudHJhbnNmZXJfZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LkV2b2x2ZSwgZXZvbHZlQ2IpO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuRXZvbHZlLCB7dXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSwgcF9pZDogcF9pZH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKiBTTklQRSAqKi9cclxuICAgICAgICB2YXIgc25pcGVkQ2IgPSBmdW5jdGlvbiBzbmlwZWRDYihtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIC8vbWVzc2FnZS5zdWNjZXNzO1xyXG4gICAgICAgICAgICAkc2NvcGUuc25pcGVfZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5yZW1vdmVMaXN0ZW5lcihTb2NrZXRFdmVudC5TbmlwZSwgc25pcGVkQ2IpO1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQobWVzc2FnZS5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbigndG9wIGNlbnRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHNjb3BlLnNuaXBlX2Nvb3JkcyA9ICcnO1xyXG4gICAgICAgICRzY29wZS5zbmlwZV9kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5zbmlwZV9hdXRvID0gZmFsc2U7IC8vIG5vdCBpbXBsZW1lbnRlZFxyXG4gICAgICAgICRzY29wZS5zbmlwZSA9IGZ1bmN0aW9uKHNuaXBlX2Nvb3Jkcykge1xyXG4gICAgICAgICAgICAkc2NvcGUuc25pcGVfZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LlNuaXBlLCBzbmlwZWRDYik7XHJcbiAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5TbmlwZSwge3VzZXJuYW1lOiAkc3RhdGVQYXJhbXMudXNlcm5hbWUsIGxhdGxuZzogc25pcGVfY29vcmRzfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAkc2NvcGUuJG9uKCdpbnZlbnRvcnk6dXBkYXRlZCcsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7IFxyXG4gwqAgwqAgwqAgwqAgwqAgwqAkc2NvcGUuaW52ZW50b3J5ID0gZGF0YTtcclxuICAgICAgICAgICAgdXBkYXRlUGVyY2VudGFnZXMoKTtcclxuIMKgIMKgIMKgIMKgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJ3BsYXllcl9zdGF0czp1cGRhdGVkJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcclxuIMKgIMKgIMKgIMKgIMKgIMKgJHNjb3BlLnBsYXllclN0YXRzID0gZGF0YTtcclxuICAgICAgICAgICAgdXBkYXRlUGVyY2VudGFnZXMoKTtcclxuIMKgIMKgIMKgIMKgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJ3BsYXllcjp1cGRhdGVkJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcclxuIMKgIMKgIMKgIMKgIMKgIMKgJHNjb3BlLnBsYXllciA9IGRhdGE7XHJcbiAgICAgICAgICAgIHVwZGF0ZVBlcmNlbnRhZ2VzKCk7XHJcbiDCoCDCoCDCoCDCoH0pO1xyXG5cclxuICAgICAgICAvLyB0aGlzIG1ha2VzIHRoZSBwb2tlbW9uIHRhYmxlIGdvIGNyYXp5IGZvciBhIGJpdFxyXG4gICAgICAgIC8vIHdlIGluc2VydCAvIGRlbGV0ZSBiYXNlZCBvbiBvdGhlciBldmVucywgc28gaXQgX3Nob3VsZF8gYmUgYWNjdXJhdGUgYW55d2F5XHJcbiAgICAgICAgLyokc2NvcGUuJG9uKCdjYXVnaHRfcG9rZW1vbjp1cGRhdGVkJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnBva2Vtb24gPSBkYXRhO1xyXG4gwqAgwqAgwqAgwqB9KTsqL1xyXG4gXHJcbiAgICAgICAgJHNjb3BlLiRvbigncG9rZW1vbjpjYXVnaHQnLCBmdW5jdGlvbihldmVudCwgZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgcG9rZW1vbiA9IGRhdGE7XHJcbiAgICAgICAgICAgIC8vcG9rZW1vbi5jcmVhdGlvbl90aW1lX21zID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiDCoCDCoCDCoCDCoCDCoCDCoCRzY29wZS5wb2tlbW9uLnB1c2gocG9rZW1vbik7XHJcbiAgICAgICAgICAgIHVwZGF0ZVBlcmNlbnRhZ2VzKCk7XHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnQ2F1Z2h0OiAnICsgcG9rZW1vbi5uYW1lICsgJyAoSVY6ICcgKyBNYXRoLmZsb29yKHBva2Vtb24uaXYpICsgJyB8IENQOiAnICsgcG9rZW1vbi5jcCArICcpJylcclxuICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCBjZW50ZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgICAgICAgKTtcclxuIMKgIMKgIMKgIMKgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJ3Bva2Vtb246cmVsZWFzZWQnLCBmdW5jdGlvbihldmVudCwgZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgcG9rZW1vbiA9IGRhdGE7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaT0kc2NvcGUucG9rZW1vbi5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBva2Vtb25baV0uaWQgPT0gcG9rZW1vbi5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wb2tlbW9uLnNwbGljZShpLDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVwZGF0ZVBlcmNlbnRhZ2VzKCk7XHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnUmVsZWFzZWQ6ICcgKyBwb2tlbW9uLm5hbWUgKyAnIChJVjogJyArIE1hdGguZmxvb3IocG9rZW1vbi5pdikgKyAnIHwgQ1A6ICcgKyBwb2tlbW9uLmNwICsgJyknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbigndG9wIGNlbnRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICAgICAgICApO1xyXG4gwqAgwqAgwqAgwqB9KTtcclxuXHJcbiAgICAgICAgJHNjb3BlLiRvbigncG9rZW1vbjpldm9sdmVkJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHBva2Vtb25fb2xkID0gZGF0YS5vbGQ7XHJcbiAgICAgICAgICAgIHZhciBwb2tlbW9uX25ldyA9IGRhdGEubmV3O1xyXG4gICAgICAgICAgICBmb3IodmFyIGk9JHNjb3BlLnBva2Vtb24ubGVuZ3RoLTE7IGk+PTA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wb2tlbW9uW2ldLmlkID09IHBva2Vtb25fb2xkLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBva2Vtb24uc3BsaWNlKGksMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuIMKgIMKgIMKgIMKgIMKgIMKgJHNjb3BlLnBva2Vtb24ucHVzaChwb2tlbW9uX25ldyk7XHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnRXZvbHZlZDogJyArIHBva2Vtb25fb2xkLm5hbWUgKyAnIHRvICcgKyBwb2tlbW9uX25ldy5uYW1lICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJyAoSVY6ICcgKyBNYXRoLmZsb29yKHBva2Vtb25fbmV3Lml2KSArICcgfCBDUDogJyArIHBva2Vtb25fbmV3LmNwICsgJyknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbigndG9wIGNlbnRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICAgICAgICApO1xyXG4gwqAgwqAgwqAgwqB9KTtcclxuXHJcbiAgICAgICAgJHNjb3BlLiRvbignZm9ydDpzcHVuJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcclxuICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRleHRDb250ZW50KCdGb3J0IHNwdW4sIHJld2FyZDogJyArIGRhdGEucmV3YXJkKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbigndG9wIGNlbnRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICAgICAgICApO1xyXG4gwqAgwqAgwqAgwqB9KTtcclxuIFxyXG4gICAgICAgIHZhciBwb3NpdGlvblVwZGF0ZXMgPSAwO1xyXG4gwqAgwqAgwqAgwqAkc2NvcGUuJG9uKCdwb3NpdGlvbjp1cGRhdGUnLCBmdW5jdGlvbihldmVudCwgZGF0YSkge1xyXG4gwqAgwqAgwqAgwqAgwqAgwqBwb3NpdGlvblVwZGF0ZXMrKztcclxuIMKgIMKgIMKgIMKgIMKgIMKgaWYgKHBvc2l0aW9uVXBkYXRlcyAlIDUgPT0gMCkge1xyXG4gwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAkc2NvcGUubWFya2Vycy5ib3QubGF0ID0gZGF0YVswXTtcclxuIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgJHNjb3BlLm1hcmtlcnMuYm90LmxuZyA9IGRhdGFbMV07XHJcbiDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoHZhciBuZXdMb2NhdGlvbiA9IHtsYXQ6IGRhdGFbMF0sIGxuZzogZGF0YVsxXX07XHJcbiDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCRzY29wZS5wYXRocy5tYWluLmxhdGxuZ3MucHVzaChuZXdMb2NhdGlvbik7XHJcbiDCoCDCoCDCoCDCoCDCoCDCoH1cclxuIMKgIMKgIMKgIMKgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS5wbGF5ZXIgPSBwbGF5ZXJEYXRhO1xyXG4gICAgICAgICRzY29wZS5wbGF5ZXJTdGF0cyA9IHBsYXllclN0YXRzRGF0YTtcclxuICAgICAgICAkc2NvcGUuaW52ZW50b3J5ID0gaW52ZW50b3J5RGF0YTtcclxuICAgICAgICAkc2NvcGUucG9rZW1vbiA9IHBva2Vtb25EYXRhO1xyXG4gICAgICAgICRzY29wZS5hdHRhY2tzID0gYXR0YWNrc0RhdGE7XHJcblxyXG4gICAgICAgIHZhciB1cGRhdGVQZXJjZW50YWdlcyA9IGZ1bmN0aW9uIHVwZGF0ZVBlcmNlbnRhZ2VzKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUucGxheWVyU3RhdHMueHBQZXJjZW50ID0gTWF0aC5mbG9vcihcclxuICAgICAgICAgICAgICAgICgkc2NvcGUucGxheWVyU3RhdHMuZXhwZXJpZW5jZSAtICRzY29wZS5wbGF5ZXJTdGF0cy5wcmV2X2xldmVsX3hwKVxyXG4gICAgICAgICAgICAgICAgLygkc2NvcGUucGxheWVyU3RhdHMubmV4dF9sZXZlbF94cCAtICRzY29wZS5wbGF5ZXJTdGF0cy5wcmV2X2xldmVsX3hwKVxyXG4gICAgICAgICAgICAgICAgKjEwMFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAkc2NvcGUucGxheWVyU3RhdHMudW5pcXVlUG9rZWRleFBlcmNlbnQgPSBNYXRoLmZsb29yKCRzY29wZS5wbGF5ZXJTdGF0cy51bmlxdWVfcG9rZWRleF9lbnRyaWVzIC8gMTUxICogMTAwKTtcclxuICAgICAgICAgICAgJHNjb3BlLnBsYXllclN0YXRzLnBva2Vtb25JbnZQZXJjZW50ID0gTWF0aC5mbG9vcigkc2NvcGUucG9rZW1vbi5sZW5ndGggLyAkc2NvcGUucGxheWVyLm1heF9wb2tlbW9uX3N0b3JhZ2UgICogMTAwKTtcclxuICAgICAgICAgICAgJHNjb3BlLnBsYXllclN0YXRzLml0ZW1zSW52UGVyY2VudCA9IE1hdGguZmxvb3IoJHNjb3BlLmludmVudG9yeS5pdGVtX2NvdW50IC8gJHNjb3BlLnBsYXllci5tYXhfaXRlbV9zdG9yYWdlICAqIDEwMCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB1cGRhdGVQZXJjZW50YWdlcygpO1xyXG5cclxuICAgICAgICAvLyB2ZXJ5IGRpcnR5IGZpeCB0byBtYWtlIHRoZSBsZWFmbGV0IG1hcCBsb2FkIGZ1bGxzY3JlZW5cclxuICAgICAgICAkc2NvcGUuJG9uKCckdmlld0NvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbGVhZmxldERhdGEuZ2V0TWFwKCkudGhlbihmdW5jdGlvbihtYXApIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgbWFwLmludmFsaWRhdGVTaXplKCk7IH0sIDMwMDApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkc2NvcGUubWFwID0geyBjZW50ZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhdDogbG9jYXRpb25EYXRhWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG5nOiBsb2NhdGlvbkRhdGFbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOiAxNVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLm1hcmtlcnMgPSB7XHJcbiAgICAgICAgICAgIGJvdDoge1xyXG4gICAgICAgICAgICAgICAgbGF0OiBsb2NhdGlvbkRhdGFbMF0sXHJcbiAgICAgICAgICAgICAgICBsbmc6IGxvY2F0aW9uRGF0YVsxXSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICRzY29wZS5wbGF5ZXIudXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICBmb2N1czogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLnBhdGhzID0ge1xyXG4gICAgICAgICAgICBtYWluOiB7XHJcbiAgICAgICAgICAgICAgICBjb2xvcjogJyNGNDQzMzYnLFxyXG4gICAgICAgICAgICAgICAgd2VpZ2h0OiA0LFxyXG4gICAgICAgICAgICAgICAgbGF0bG5nczogW1xyXG4gICAgICAgICAgICAgICAgICAgIHsgbGF0OiBsb2NhdGlvbkRhdGFbMF0sIGxuZzogbG9jYXRpb25EYXRhWzFdIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLnBva2Vtb25EYXRhVGFibGVPcHRpb25zID0gRFRPcHRpb25zQnVpbGRlci5uZXdPcHRpb25zKClcclxuICAgICAgICAgICAgLndpdGhPcHRpb24oJ29yZGVyJywgW1sgMCwgXCJkZXNjXCIgXV0pXHJcbiAgICAgICAgICAgIC53aXRoT3B0aW9uKCdzdGF0ZVNhdmUnLCB0cnVlKTtcclxuICAgICAgICAgICAgLyoud2l0aE9wdGlvbignc2Nyb2xsWScsICc3NXZoJylcclxuICAgICAgICAgICAgLndpdGhPcHRpb24oJ3Njcm9sbFgnLCB0cnVlKTtcclxuICAgICAgICAgICAgLndpdGhPcHRpb24oJ3BhZ2luZycsIHRydWUpKi9cclxuXHJcbiAgICAgICAgJHNjb3BlLmV4cEx2bE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGFuaW1hdGU6e1xyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246MTAwMCxcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6dHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBiYXJDb2xvcjonIzAzQTlGNCcsXHJcbiAgICAgICAgICAgIHNjYWxlQ29sb3I6ZmFsc2UsXHJcbiAgICAgICAgICAgIGxpbmVXaWR0aDoxMCxcclxuICAgICAgICAgICAgbGluZUNhcDonY2lyY2xlJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS51bmlxdWVQb2tlZGV4T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgYW5pbWF0ZTp7XHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjoxMDAwLFxyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDp0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJhckNvbG9yOicjRkZDMTA3JyxcclxuICAgICAgICAgICAgc2NhbGVDb2xvcjpmYWxzZSxcclxuICAgICAgICAgICAgbGluZVdpZHRoOjEwLFxyXG4gICAgICAgICAgICBsaW5lQ2FwOidjaXJjbGUnXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnBva2Vtb25JbnZPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBhbmltYXRlOntcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOjEwMDAsXHJcbiAgICAgICAgICAgICAgICBlbmFibGVkOnRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYmFyQ29sb3I6JyMwMDk2ODgnLFxyXG4gICAgICAgICAgICBzY2FsZUNvbG9yOmZhbHNlLFxyXG4gICAgICAgICAgICBsaW5lV2lkdGg6MTAsXHJcbiAgICAgICAgICAgIGxpbmVDYXA6J2NpcmNsZSdcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuaXRlbXNJbnZPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBhbmltYXRlOntcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOjEwMDAsXHJcbiAgICAgICAgICAgICAgICBlbmFibGVkOnRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYmFyQ29sb3I6JyNGNDQzMzYnLFxyXG4gICAgICAgICAgICBzY2FsZUNvbG9yOmZhbHNlLFxyXG4gICAgICAgICAgICBsaW5lV2lkdGg6MTAsXHJcbiAgICAgICAgICAgIGxpbmVDYXA6J2NpcmNsZSdcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG5cclxuICAgIH0pXHJcbjtcclxuIiwiYW5ndWxhci5tb2R1bGUoJ1Bva2V0cmFpbmVyLlNlcnZpY2UuTmF2aWdhdGlvbicsIFtdKVxuXG4gICAgLmZhY3RvcnkoJ05hdmlnYXRpb24nLCBmdW5jdGlvbiBOYXZpZ2F0aW9uRmFjdG9yeSgpIHtcbiAgICAgICAgdmFyIGhlYWRlck5hdiA9IFtdO1xuXG4gICAgICAgIHZhciBnZXRQcmltYXJ5TWVudSA9IGZ1bmN0aW9uIGdldFByaW1hcnlNZW51KCkge1xuICAgICAgICAgICAgcmV0dXJuIGhlYWRlck5hdi5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByaW9yaXR5ID0gYS5Qcmlvcml0eSAtIGIuUHJpb3JpdHk7XG5cbiAgICAgICAgICAgICAgICBpZiAocHJpb3JpdHkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuTGFiZWwubG9jYWxlQ29tcGFyZShiLkxhYmVsKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcHJpb3JpdHk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHJlZ2lzdGVyUHJpbWFyeU1lbnUgPSBmdW5jdGlvbiByZWdpc3RlclByaW1hcnlNZW51KGxhYmVsLCBzdGF0ZSwgcHJpb3JpdHksIGljb24sIGFjdGl2ZVN0YXRlKSB7XG4gICAgICAgICAgICBpZiggdHlwZW9mKGljb24pICE9PSBcInN0cmluZ1wiKXtcbiAgICAgICAgICAgICAgICBpY29uID0gXCJtZCBtZC1jaGV2cm9uLXJpZ2h0XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiggdHlwZW9mKGFjdGl2ZVN0YXRlKSAhPT0gXCJzdHJpbmdcIil7XG4gICAgICAgICAgICAgICAgYWN0aXZlU3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiAocHJpb3JpdHkpICE9PSBcIm51bWJlclwiIHx8IHByaW9yaXR5IDwgMCkge1xuICAgICAgICAgICAgICAgIHByaW9yaXR5ID0gMTA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGhlYWRlck5hdi5wdXNoKHtcbiAgICAgICAgICAgICAgICBMYWJlbDogbGFiZWwsXG4gICAgICAgICAgICAgICAgU3RhdGU6IHN0YXRlLFxuICAgICAgICAgICAgICAgIEFjdGl2ZVN0YXRlOiBhY3RpdmVTdGF0ZSxcbiAgICAgICAgICAgICAgICBQcmlvcml0eTogcHJpb3JpdHksXG4gICAgICAgICAgICAgICAgSWNvbjogaWNvblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHByaW1hcnk6IHtcbiAgICAgICAgICAgICAgICBnZXQ6IGdldFByaW1hcnlNZW51LFxuICAgICAgICAgICAgICAgIHJlZ2lzdGVyOiByZWdpc3RlclByaW1hcnlNZW51XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
