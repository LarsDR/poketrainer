angular.module("poketrainer",["poketrainer.Module.Templates","Poketrainer.Module.SocketEventEmitter","Poketrainer.Service.Navigation","Poketrainer.Service.SocketEvent","Poketrainer.Service.Socket","Poketrainer.State.Abstracts","Poketrainer.State.Status","Poketrainer.State.Users","ui.router","ngMaterial","ngMessages"]).config(["$urlRouterProvider","$locationProvider","$urlMatcherFactoryProvider","$mdThemingProvider",function(e,t,o,a){e.rule(function(e,t){var o=t.url().toLowerCase();if(!("/"===o[o.length-1]||o.indexOf("/?")>-1))return o.indexOf("?")>-1?o.replace("?","/?"):o+"/"}).otherwise("/"),o.strictMode(!1),a.theme("default").primaryPalette("blue").accentPalette("red")}]).run(["$state","$rootScope",function(e,t){t.$on("inventory:updated",function(e){})}]),angular.module("Poketrainer.Module.SocketEventEmitter",["Poketrainer.Service.Socket"]).run(["$rootScope","PokeSocket","SocketEvent",function(e,t,o){t.forward(o.UserStatus),t.on(o.Data,function(t){e.$broadcast(t.event+":"+t.action,t.data)})}]),angular.module("Poketrainer.State.Abstracts",["ui.router"]).config(["$stateProvider",function(e){e.state("public",{"abstract":!0,views:{header:{templateUrl:"states/abstracts/header.tpl.html",controller:"HeaderController"},content:{template:"<ui-view/>"}}})}]).controller("HeaderController",["$rootScope","$scope","$state","Navigation",function(e,t,o,a){t.navigation=a.primary.get(),t.state=o.current.name,e.$on("$stateChangeSuccess",function(e,o,a,n,r){t.state=o.name})}]),angular.module("Poketrainer.State.Status",["ui.router","uiGmapgoogle-maps","chart.js","easypiechart","datatables","ui-leaflet","nemLogging"]).config(["$stateProvider","uiGmapGoogleMapApiProvider",function(e,t){t.configure({v:"3.24",libraries:"weather,geometry,visualization"}),e.state("public.dashboard",{url:"/dashboard/:username",resolve:{locationData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,o,a){var n=e.defer(),r=function(e){!angular.isUndefined(e)&&e.success&&"location"==e.type&&n.resolve(angular.fromJson(e.data))};return o.on(a.Request,r),o.emit(a.Request,{username:t.username,types:["location"]}),n.promise}],inventoryData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,o,a){var n=e.defer(),r=function(e){!angular.isUndefined(e)&&e.success&&"inventory"==e.type&&n.resolve(angular.fromJson(e.data))};return o.on(a.Request,r),o.emit(a.Request,{username:t.username,types:["inventory"]}),n.promise}],playerData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,o,a){var n=e.defer(),r=function(e){!angular.isUndefined(e)&&e.success&&"player"==e.type&&n.resolve(angular.fromJson(e.data))};return o.on(a.Request,r),o.emit(a.Request,{username:t.username,types:["player"]}),n.promise}],playerStatsData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,o,a){var n=e.defer(),r=function(e){!angular.isUndefined(e)&&e.success&&"player_stats"==e.type&&n.resolve(angular.fromJson(e.data))};return o.on(a.Request,r),o.emit(a.Request,{username:t.username,types:["player_stats"]}),n.promise}],pokemonData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,o,a){var n=e.defer(),r=function(e){!angular.isUndefined(e)&&e.success&&"pokemon"==e.type&&n.resolve(angular.fromJson(e.data))};return o.on(a.Request,r),o.emit(a.Request,{username:t.username,types:["pokemon"]}),n.promise}],attacksData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,o,a){var n=e.defer(),r=function(e){!angular.isUndefined(e)&&e.success&&"attacks"==e.type&&n.resolve(angular.fromJson(e.data))};return o.on(a.Request,r),o.emit(a.Request,{username:t.username,types:["attacks"]}),n.promise}]},controller:"DashboardController",templateUrl:"states/dashboard/dashboard.tpl.html"})}]).run(["Navigation",function(e){e.primary.register("Users","public.users",30,"md md-event-available","public.users")}]).controller("DashboardController",["$scope","$stateParams","$mdToast","PokeSocket","leafletData","locationData","inventoryData","playerData","playerStatsData","pokemonData","attacksData","SocketEvent","DTOptionsBuilder",function(e,t,o,a,n,r,s,i,l,u,c,p,d){a.emit(p.Join,{room:t.username});var m,v=function S(t){if(e.evolve_disabled=!1,e.transfer_disabled=!1,t.success)for(var n=e.pokemon.length-1;n>=0;n--)e.pokemon[n].id==m&&e.pokemon.splice(n,1);m=0,a.removeListener(p.Transfer,S),o.show(o.simple().textContent(t.message).position("top center").hideDelay(3e3))};e.transfer_disabled=!1,e.transfer=function(o){m=o,e.evolve_disabled=!0,e.transfer_disabled=!0,a.on(p.Transfer,v),a.emit(p.Transfer,{username:t.username,p_id:o})};var f=function h(t){e.evolve_disabled=!1,e.transfer_disabled=!1,a.removeListener(p.Evolve,h),o.show(o.simple().textContent(t.message).position("top center").hideDelay(3e3))};e.evolve_disabled=!1,e.evolve=function(o){e.evolve_disabled=!0,e.transfer_disabled=!0,a.on(p.Evolve,f),a.emit(p.Evolve,{username:t.username,p_id:o})};var k=function P(t){e.snipe_disabled=!1,a.removeListener(p.Snipe,P),o.show(o.simple().textContent(t.message).position("top center").hideDelay(3e3))};e.snipe_coords="",e.snipe_disabled=!1,e.snipe_auto=!1,e.snipe=function(o){e.snipe_disabled=!0,a.on(p.Snipe,k),a.emit(p.Snipe,{username:t.username,latlng:o})},e.$on("inventory:updated",function(t,o){e.inventory=o,y()}),e.$on("player_stats:updated",function(t,o){e.playerStats=o,y()}),e.$on("player:updated",function(t,o){e.player=o,y()}),e.$on("pokemon:caught",function(t,a){var n=a;e.pokemon.push(n),y(),o.show(o.simple().textContent("Caught: "+n.name+" (IV: "+Math.floor(n.iv)+" | CP: "+n.cp+")").position("top center").hideDelay(3e3))}),e.$on("pokemon:released",function(t,a){for(var n=a,r=e.pokemon.length-1;r>=0;r--)e.pokemon[r].id==n.id&&e.pokemon.splice(r,1);y(),o.show(o.simple().textContent("Released: "+n.name+" (IV: "+Math.floor(n.iv)+" | CP: "+n.cp+")").position("top center").hideDelay(3e3))}),e.$on("pokemon:evolved",function(t,a){for(var n=a.old,r=a["new"],s=e.pokemon.length-1;s>=0;s--)e.pokemon[s].id==n.id&&e.pokemon.splice(s,1);e.pokemon.push(r),o.show(o.simple().textContent("Evolved: "+n.name+" to "+r.name+" (IV: "+Math.floor(r.iv)+" | CP: "+r.cp+")").position("top center").hideDelay(3e3))}),e.$on("fort:spun",function(e,t){o.show(o.simple().textContent("Fort spun, reward: "+t.reward).position("top center").hideDelay(3e3))});var g=0;e.$on("position:update",function(t,o){if(g++,g%5==0){e.markers.bot.lat=o[0],e.markers.bot.lng=o[1];var a={lat:o[0],lng:o[1]};e.paths.main.latlngs.push(a)}}),e.player=i,e.playerStats=l,e.inventory=s,e.pokemon=u,e.attacks=c;var y=function(){e.playerStats.xpPercent=Math.floor((e.playerStats.experience-e.playerStats.prev_level_xp)/(e.playerStats.next_level_xp-e.playerStats.prev_level_xp)*100),e.playerStats.uniquePokedexPercent=Math.floor(e.playerStats.unique_pokedex_entries/151*100),e.playerStats.pokemonInvPercent=Math.floor(e.pokemon.length/e.player.max_pokemon_storage*100),e.playerStats.itemsInvPercent=Math.floor(e.inventory.item_count/e.player.max_item_storage*100)};y(),e.$on("$viewContentLoaded",function(){n.getMap().then(function(e){setTimeout(function(){e.invalidateSize()},3e3)})}),e.map={center:{lat:r[0],lng:r[1],zoom:15}},e.markers={bot:{lat:r[0],lng:r[1],message:e.player.username,focus:!0,draggable:!1}},e.paths={main:{color:"#F44336",weight:4,latlngs:[{lat:r[0],lng:r[1]}]}},e.pokemonDataTableOptions=d.newOptions().withOption("order",[[0,"desc"]]).withOption("stateSave",!0),e.expLvlOptions={animate:{duration:1e3,enabled:!0},barColor:"#03A9F4",scaleColor:!1,lineWidth:10,lineCap:"circle"},e.uniquePokedexOptions={animate:{duration:1e3,enabled:!0},barColor:"#FFC107",scaleColor:!1,lineWidth:10,lineCap:"circle"},e.pokemonInvOptions={animate:{duration:1e3,enabled:!0},barColor:"#009688",scaleColor:!1,lineWidth:10,lineCap:"circle"},e.itemsInvOptions={animate:{duration:1e3,enabled:!0},barColor:"#F44336",scaleColor:!1,lineWidth:10,lineCap:"circle"}}]),angular.module("Poketrainer.State.Users",["ui.router"]).config(["$stateProvider",function(e){e.state("public.users",{url:"/",resolve:{Users:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,o,a){var n=e.defer(),r=function s(e){!angular.isUndefined(e)&&e.success&&angular.isArray(e.users)&&(o.removeListener(a.UserList,s),n.resolve(e.users))};return o.on(a.UserList,r),o.emit(a.UserList),n.promise}]},controller:"UsersController",templateUrl:"states/users/users.tpl.html"})}]).run(["Navigation",function(e){e.primary.register("Users","public.users",30,"md md-event-available","public.users")}]).controller("UsersController",["$scope","Users","PokeSocket","SocketEvent",function(e,t,o,a){e.users=t;var n=function(t,o){for(var a=0;a<e.users.length;a++)e.users[a].username==o.username&&(e.users[a].status=o.status)};e.$on(a._prefix+a.UserStatus,n)}]),angular.module("Poketrainer.Service.Navigation",[]).factory("Navigation",function(){var e=[],t=function(){return e.sort(function(e,t){var o=e.Priority-t.Priority;return 0===o?e.Label.localeCompare(t.Label):o})},o=function(t,o,a,n,r){"string"!=typeof n&&(n="md md-chevron-right"),"string"!=typeof r&&(r=o),("number"!=typeof a||a<0)&&(a=10),e.push({Label:t,State:o,ActiveState:r,Priority:a,Icon:n})};return{primary:{get:t,register:o}}}),angular.module("Poketrainer.Service.SocketEvent",[]).factory("SocketEvent",function(){return{_prefix:"socket:",UserList:"users",UserStatus:"user_status",Request:"pull",Data:"push",Join:"join",Transfer:"transfer",Evolve:"evolve",Snipe:"snipe"}}),angular.module("Poketrainer.Service.Socket",["btford.socket-io"]).factory("PokeSocket",["socketFactory","$location",function(e,t){var o=window.location.pathname.replace(/\/+$/g,"")+"/socket.io";return e({ioSocket:io.connect(window.location.protocol+"//"+window.location.host+"/poketrainer",{path:o})})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIm1vZHVsZXMvbW9kdWxlLlNvY2tldEV2ZW50RW1pdHRlci5qcyIsInN0YXRlcy9hYnN0cmFjdHMvc3RhdGUuYWJzdHJhY3RzLmpzIiwic3RhdGVzL2Rhc2hib2FyZC9zdGF0ZS5kYXNoYm9hcmQuanMiLCJzdGF0ZXMvdXNlcnMvc3RhdGUudXNlcnMuanMiLCJtb2R1bGVzL3NlcnZpY2VzL3NlcnZpY2UuTmF2aWdhdGlvbi5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlciIsIiRtZFRoZW1pbmdQcm92aWRlciIsInJ1bGUiLCIkaW5qZWN0b3IiLCIkbG9jYXRpb24iLCJwYXRoIiwidXJsIiwidG9Mb3dlckNhc2UiLCJsZW5ndGgiLCJpbmRleE9mIiwicmVwbGFjZSIsIm90aGVyd2lzZSIsInN0cmljdE1vZGUiLCJ0aGVtZSIsInByaW1hcnlQYWxldHRlIiwiYWNjZW50UGFsZXR0ZSIsInJ1biIsIiRzdGF0ZSIsIiRyb290U2NvcGUiLCIkb24iLCJkYXRhIiwiUG9rZVNvY2tldCIsIlNvY2tldEV2ZW50IiwiZm9yd2FyZCIsIlVzZXJTdGF0dXMiLCJvbiIsIkRhdGEiLCIkYnJvYWRjYXN0IiwiZXZlbnQiLCJhY3Rpb24iLCIkc3RhdGVQcm92aWRlciIsInN0YXRlIiwiYWJzdHJhY3QiLCJ2aWV3cyIsImhlYWRlciIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsImNvbnRlbnQiLCJ0ZW1wbGF0ZSIsIiRzY29wZSIsIk5hdmlnYXRpb24iLCJuYXZpZ2F0aW9uIiwicHJpbWFyeSIsImdldCIsImN1cnJlbnQiLCJuYW1lIiwidG9TdGF0ZSIsInRvUGFyYW1zIiwiZnJvbVN0YXRlIiwiZnJvbVBhcmFtcyIsInVpR21hcEdvb2dsZU1hcEFwaVByb3ZpZGVyIiwiY29uZmlndXJlIiwidiIsImxpYnJhcmllcyIsInJlc29sdmUiLCJsb2NhdGlvbkRhdGEiLCIkcSIsIiRzdGF0ZVBhcmFtcyIsImQiLCJkZWZlciIsImxvY2F0aW9uRGF0YUNiIiwibWVzc2FnZSIsImlzVW5kZWZpbmVkIiwic3VjY2VzcyIsInR5cGUiLCJmcm9tSnNvbiIsIlJlcXVlc3QiLCJlbWl0IiwidXNlcm5hbWUiLCJ0eXBlcyIsInByb21pc2UiLCJpbnZlbnRvcnlEYXRhIiwiaW52ZW50b3J5RGF0YUNiIiwicGxheWVyRGF0YSIsInBsYXllckRhdGFDYiIsInBsYXllclN0YXRzRGF0YSIsInBsYXllclN0YXRzRGF0YUNiIiwicG9rZW1vbkRhdGEiLCJwb2tlbW9uRGF0YUNiIiwiYXR0YWNrc0RhdGEiLCJhdHRhY2tzRGF0YUNiIiwicmVnaXN0ZXIiLCIkbWRUb2FzdCIsImxlYWZsZXREYXRhIiwiRFRPcHRpb25zQnVpbGRlciIsIkpvaW4iLCJyb29tIiwidHJhbnNmZXJfcF9pZCIsInRyYW5zZmVyQ2IiLCJldm9sdmVfZGlzYWJsZWQiLCJ0cmFuc2Zlcl9kaXNhYmxlZCIsImkiLCJwb2tlbW9uIiwiaWQiLCJzcGxpY2UiLCJyZW1vdmVMaXN0ZW5lciIsIlRyYW5zZmVyIiwic2hvdyIsInNpbXBsZSIsInRleHRDb250ZW50IiwicG9zaXRpb24iLCJoaWRlRGVsYXkiLCJ0cmFuc2ZlciIsInBfaWQiLCJldm9sdmVDYiIsIkV2b2x2ZSIsImV2b2x2ZSIsInNuaXBlZENiIiwic25pcGVfZGlzYWJsZWQiLCJTbmlwZSIsInNuaXBlX2Nvb3JkcyIsInNuaXBlX2F1dG8iLCJzbmlwZSIsImxhdGxuZyIsImludmVudG9yeSIsInVwZGF0ZVBlcmNlbnRhZ2VzIiwicGxheWVyU3RhdHMiLCJwbGF5ZXIiLCJwdXNoIiwiTWF0aCIsImZsb29yIiwiaXYiLCJjcCIsInBva2Vtb25fb2xkIiwib2xkIiwicG9rZW1vbl9uZXciLCJyZXdhcmQiLCJwb3NpdGlvblVwZGF0ZXMiLCJtYXJrZXJzIiwiYm90IiwibGF0IiwibG5nIiwibmV3TG9jYXRpb24iLCJwYXRocyIsIm1haW4iLCJsYXRsbmdzIiwiYXR0YWNrcyIsInhwUGVyY2VudCIsImV4cGVyaWVuY2UiLCJwcmV2X2xldmVsX3hwIiwibmV4dF9sZXZlbF94cCIsInVuaXF1ZVBva2VkZXhQZXJjZW50IiwidW5pcXVlX3Bva2VkZXhfZW50cmllcyIsInBva2Vtb25JbnZQZXJjZW50IiwibWF4X3Bva2Vtb25fc3RvcmFnZSIsIml0ZW1zSW52UGVyY2VudCIsIml0ZW1fY291bnQiLCJtYXhfaXRlbV9zdG9yYWdlIiwiZ2V0TWFwIiwidGhlbiIsIm1hcCIsInNldFRpbWVvdXQiLCJpbnZhbGlkYXRlU2l6ZSIsImNlbnRlciIsInpvb20iLCJmb2N1cyIsImRyYWdnYWJsZSIsImNvbG9yIiwid2VpZ2h0IiwicG9rZW1vbkRhdGFUYWJsZU9wdGlvbnMiLCJuZXdPcHRpb25zIiwid2l0aE9wdGlvbiIsImV4cEx2bE9wdGlvbnMiLCJhbmltYXRlIiwiZHVyYXRpb24iLCJlbmFibGVkIiwiYmFyQ29sb3IiLCJzY2FsZUNvbG9yIiwibGluZVdpZHRoIiwibGluZUNhcCIsInVuaXF1ZVBva2VkZXhPcHRpb25zIiwicG9rZW1vbkludk9wdGlvbnMiLCJpdGVtc0ludk9wdGlvbnMiLCJVc2VycyIsInVzZXJFdmVudENiIiwiaXNBcnJheSIsInVzZXJzIiwiVXNlckxpc3QiLCJ1c2VyRXZlbnRVcGRhdGUiLCJzdGF0dXMiLCJfcHJlZml4IiwiZmFjdG9yeSIsImhlYWRlck5hdiIsImdldFByaW1hcnlNZW51Iiwic29ydCIsImEiLCJiIiwicHJpb3JpdHkiLCJQcmlvcml0eSIsIkxhYmVsIiwibG9jYWxlQ29tcGFyZSIsInJlZ2lzdGVyUHJpbWFyeU1lbnUiLCJsYWJlbCIsImljb24iLCJhY3RpdmVTdGF0ZSIsIlN0YXRlIiwiQWN0aXZlU3RhdGUiLCJJY29uIiwic29ja2V0RmFjdG9yeSIsIndpbmRvdyIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJpb1NvY2tldCIsImlvIiwiY29ubmVjdCIsInByb3RvY29sIiwiaG9z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QUdBSSxFQUFBLFNBQUFDLEVBQUFqSyxFQUFBNEosRUFBQU0sRUFBQUMsR0FDQSxnQkFBQUQsS0FDQUEsRUFBQSx1QkFFQSxnQkFBQUMsS0FDQUEsRUFBQW5LLElBRUEsZ0JBQUE0SixJQUFBQSxFQUFBLEtBQ0FBLEVBQUEsSUFFQUwsRUFBQWhFLE1BQ0F1RSxNQUFBRyxFQUNBRyxNQUFBcEssRUFDQXFLLFlBQUFGLEVBQ0FOLFNBQUFELEVBQ0FVLEtBQUFKLElBR0EsUUFDQXZKLFNBQ0FDLElBQUE0SSxFQUNBdEcsU0FBQThHLE1BSUFwTSxRQUFBQyxPQUFBLHNDQUFBeUwsUUFBQSxjQUFBLFdBQ0EsT0N6REFELFFBQUEsVUFDQUgsU0FBQSxRQUNBekosV0FBQSxjQUNBMEMsUUFBQSxPQUNBeEMsS0FBQSxPQUNBMkQsS0FBQSxPQUNBVyxTQUFBLFdBQ0FTLE9BQUEsU0FDQUksTUFBQSxXQUdBbEgsUUFBQUMsT0FBQSw4QkFBQSxxQkFBQXlMLFFBQUEsY0FDQSxnQkFDQSxZQUNBLFNBQUFpQixFQUFBbE0sR0FDQSxHQUFBQyxHQUFBa00sT0FBQUMsU0FBQUMsU0FBQS9MLFFBQUEsUUFBQSxJQUFBLFlBRUEsT0FBQTRMLElBQUFJLFNBQUFDLEdBQUFDLFFBQUFMLE9BQUFDLFNBQUFLLFNBQUEsS0FBQU4sT0FBQUMsU0FBQU0sS0FBQSxnQkFBQXpNLEtBQUFBIiwiZmlsZSI6ImFuZ3VsYXIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ3Bva2V0cmFpbmVyJywgW1xuXHQncG9rZXRyYWluZXIuTW9kdWxlLlRlbXBsYXRlcycsXG5cblx0LyoqIEludGVybmFsIE1vZHVsZXMgKiovXG5cdCdQb2tldHJhaW5lci5Nb2R1bGUuU29ja2V0RXZlbnRFbWl0dGVyJyxcblxuXHQvKiogSW50ZXJuYWwgU2VydmljZXMgKiovXG5cdCdQb2tldHJhaW5lci5TZXJ2aWNlLk5hdmlnYXRpb24nLFxuXHQnUG9rZXRyYWluZXIuU2VydmljZS5Tb2NrZXRFdmVudCcsXG5cdCdQb2tldHJhaW5lci5TZXJ2aWNlLlNvY2tldCcsXG5cblx0LyoqIFN0YXRlcy9Sb3V0ZXMgKiovXG5cdCdQb2tldHJhaW5lci5TdGF0ZS5BYnN0cmFjdHMnLFxuXHQnUG9rZXRyYWluZXIuU3RhdGUuU3RhdHVzJyxcblx0J1Bva2V0cmFpbmVyLlN0YXRlLlVzZXJzJyxcblxuXG5cdC8qKiBFeHRlcm5hbCBMaWJzICoqL1xuXHQndWkucm91dGVyJyxcbiAgICAnbmdNYXRlcmlhbCcsXG4gICAgJ25nTWVzc2FnZXMnXG5cblx0LyoqIEludGVybmFsIERpcmVjdGl2ZXMgKiovXG5cdFxuXSlcblxuXHQuY29uZmlnKGZ1bmN0aW9uIHBva2VUcmFpbmVyQ29uZmlnKCR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIsICR1cmxNYXRjaGVyRmFjdG9yeVByb3ZpZGVyLCAkbWRUaGVtaW5nUHJvdmlkZXIpIHtcblx0XHQvLyRsb2NhdGlvblByb3ZpZGVyXG5cdFx0Ly9cdC5oYXNoUHJlZml4KCchJylcblx0XHQvL1x0Lmh0bWw1TW9kZShmYWxzZSk7XG5cblx0XHQkdXJsUm91dGVyUHJvdmlkZXIucnVsZShmdW5jdGlvbiAoJGluamVjdG9yLCAkbG9jYXRpb24pIHtcblx0XHRcdHZhciBwYXRoID0gJGxvY2F0aW9uLnVybCgpLnRvTG93ZXJDYXNlKCk7XG5cblx0XHRcdC8vIGNoZWNrIHRvIHNlZSBpZiB0aGUgcGF0aCBhbHJlYWR5IGhhcyBhIHNsYXNoIHdoZXJlIGl0IHNob3VsZCBiZVxuXHRcdFx0aWYgKHBhdGhbcGF0aC5sZW5ndGggLSAxXSA9PT0gJy8nIHx8IHBhdGguaW5kZXhPZignLz8nKSA+IC0xKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHBhdGguaW5kZXhPZignPycpID4gLTEpIHtcblx0XHRcdFx0cmV0dXJuIHBhdGgucmVwbGFjZSgnPycsICcvPycpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gcGF0aCArICcvJztcblx0XHR9KVxuXHRcdC5vdGhlcndpc2UoJy8nKTtcblxuXHRcdCR1cmxNYXRjaGVyRmFjdG9yeVByb3ZpZGVyLnN0cmljdE1vZGUoZmFsc2UpO1xuXG4gICAgICAgICRtZFRoZW1pbmdQcm92aWRlci50aGVtZSgnZGVmYXVsdCcpXG4gICAgICAgICAgICAucHJpbWFyeVBhbGV0dGUoJ2JsdWUnKVxuICAgICAgICAgICAgLmFjY2VudFBhbGV0dGUoJ3JlZCcpO1xuXG5cdH0pXG5cblx0LnJ1bihmdW5jdGlvbiBwb2tlVHJhaW5lclJ1biAoJHN0YXRlLCAkcm9vdFNjb3BlKSB7XG5cdFx0JHJvb3RTY29wZS4kb24oJ2ludmVudG9yeTp1cGRhdGVkJywgZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHQvL2NvbnNvbGUubG9nKFwiSW52ZW50b3J5ISEgOkQgXCIpXG5cdFx0fSlcblx0fSlcblxuOyIsImFuZ3VsYXIubW9kdWxlKCdQb2tldHJhaW5lci5Nb2R1bGUuU29ja2V0RXZlbnRFbWl0dGVyJywgWydQb2tldHJhaW5lci5TZXJ2aWNlLlNvY2tldCddKVxuICAgIC5ydW4oZnVuY3Rpb24gcnVuU29ja2V0RW1pdHRlcigkcm9vdFNjb3BlLCBQb2tlU29ja2V0LCBTb2NrZXRFdmVudCl7XG5cbiAgICAgICAgUG9rZVNvY2tldC5mb3J3YXJkKFNvY2tldEV2ZW50LlVzZXJTdGF0dXMpO1xuXG4gICAgICAgIFBva2VTb2NrZXQub24oU29ja2V0RXZlbnQuRGF0YSwgZnVuY3Rpb24gZ2V0U29ja2V0UHVzaChkYXRhKXtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJHb3QgcHVzaCBkYXRhOiBcIiwgZGF0YSk7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoZGF0YS5ldmVudCArIFwiOlwiICsgZGF0YS5hY3Rpb24sIGRhdGEuZGF0YSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEJyb2FkY2FzdCBldmVudHMgdXNpbmcgJHJvb3RTY29wZS4kYnJvYWRjYXN0KFtuYW1lXSwgW2RhdGFdKTtcbiAgICB9KVxuXG47IiwiYW5ndWxhci5tb2R1bGUoJ1Bva2V0cmFpbmVyLlN0YXRlLkFic3RyYWN0cycsIFtcbiAgICAndWkucm91dGVyJ1xuXSlcblxuICAgIC5jb25maWcoZnVuY3Rpb24gY29uZmlnKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ3B1YmxpYycsIHtcbiAgICAgICAgICAgICAgICBhYnN0cmFjdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB2aWV3czoge1xuICAgICAgICAgICAgICAgICAgICBcImhlYWRlclwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRlcy9hYnN0cmFjdHMvaGVhZGVyLnRwbC5odG1sJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdIZWFkZXJDb250cm9sbGVyJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBcImNvbnRlbnRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICc8dWktdmlldy8+J1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgO1xuICAgIH0pXG5cbiAgICAuY29udHJvbGxlcignSGVhZGVyQ29udHJvbGxlcicsIGZ1bmN0aW9uIEhlYWRlckNvbnRyb2xsZXIoJHJvb3RTY29wZSwgJHNjb3BlLCAkc3RhdGUsIE5hdmlnYXRpb24pe1xuICAgICAgICAkc2NvcGUubmF2aWdhdGlvbiA9IE5hdmlnYXRpb24ucHJpbWFyeS5nZXQoKTtcbiAgICAgICAgJHNjb3BlLnN0YXRlID0gJHN0YXRlLmN1cnJlbnQubmFtZTtcblxuICAgICAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uIChldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcykge1xuICAgICAgICAgICAgJHNjb3BlLnN0YXRlID0gdG9TdGF0ZS5uYW1lO1xuICAgICAgICB9KTtcbiAgICB9KVxuXG47IiwiYW5ndWxhci5tb2R1bGUoJ1Bva2V0cmFpbmVyLlN0YXRlLlN0YXR1cycsIFtcclxuICAgICd1aS5yb3V0ZXInLFxyXG4gICAgJ3VpR21hcGdvb2dsZS1tYXBzJyxcclxuICAgICdjaGFydC5qcycsXHJcbiAgICAnZWFzeXBpZWNoYXJ0JyxcclxuICAgICdkYXRhdGFibGVzJyxcclxuICAgICd1aS1sZWFmbGV0JyxcclxuICAgICduZW1Mb2dnaW5nJ1xyXG5dKVxyXG5cclxuICAgIC5jb25maWcoZnVuY3Rpb24gY29uZmlnKCRzdGF0ZVByb3ZpZGVyLCB1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlcikge1xyXG5cclxuICAgICAgICB1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlci5jb25maWd1cmUoe1xyXG4gICAgICAgICAgICAvL2tleTogJzxNQVBTIEFQSSBLRVk+JyxcclxuICAgICAgICAgICAgdjogJzMuMjQnLFxyXG4gICAgICAgICAgICBsaWJyYXJpZXM6ICd3ZWF0aGVyLGdlb21ldHJ5LHZpc3VhbGl6YXRpb24nXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdwdWJsaWMuZGFzaGJvYXJkJywge1xyXG4gICAgICAgICAgICB1cmw6ICcvZGFzaGJvYXJkLzp1c2VybmFtZScsXHJcbiAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uRGF0YTogWyckcScsICckc3RhdGVQYXJhbXMnLCAnUG9rZVNvY2tldCcsICdTb2NrZXRFdmVudCcsIGZ1bmN0aW9uIHJlc29sdmVMb2NhdGlvbkRhdGEoJHEsICRzdGF0ZVBhcmFtcywgUG9rZVNvY2tldCwgU29ja2V0RXZlbnQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9uRGF0YUNiID0gZnVuY3Rpb24gbG9jYXRpb25EYXRhQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKG1lc3NhZ2UpIHx8ICFtZXNzYWdlLnN1Y2Nlc3MgfHwgbWVzc2FnZS50eXBlICE9ICdsb2NhdGlvbicpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQucmVzb2x2ZShhbmd1bGFyLmZyb21Kc29uKG1lc3NhZ2UuZGF0YSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQub24oU29ja2V0RXZlbnQuUmVxdWVzdCwgbG9jYXRpb25EYXRhQ2IpO1xyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5SZXF1ZXN0LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAkc3RhdGVQYXJhbXMudXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVzOiBbJ2xvY2F0aW9uJ11cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQucHJvbWlzZTtcclxuICAgICAgICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgICAgICAgaW52ZW50b3J5RGF0YTogWyckcScsICckc3RhdGVQYXJhbXMnLCAnUG9rZVNvY2tldCcsICdTb2NrZXRFdmVudCcsIGZ1bmN0aW9uIHJlc29sdmVJbnZlbnRvcnlEYXRhKCRxLCAkc3RhdGVQYXJhbXMsIFBva2VTb2NrZXQsIFNvY2tldEV2ZW50KXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9ICRxLmRlZmVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnZlbnRvcnlEYXRhQ2IgPSBmdW5jdGlvbiBpbnZlbnRvcnlEYXRhQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKG1lc3NhZ2UpIHx8ICFtZXNzYWdlLnN1Y2Nlc3MgfHwgbWVzc2FnZS50eXBlICE9ICdpbnZlbnRvcnknKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkLnJlc29sdmUoYW5ndWxhci5mcm9tSnNvbihtZXNzYWdlLmRhdGEpKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LlJlcXVlc3QsIGludmVudG9yeURhdGFDYik7XHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlJlcXVlc3QsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXM6IFsnaW52ZW50b3J5J11cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQucHJvbWlzZTtcclxuICAgICAgICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgICAgICAgcGxheWVyRGF0YTogWyckcScsICckc3RhdGVQYXJhbXMnLCAnUG9rZVNvY2tldCcsICdTb2NrZXRFdmVudCcsIGZ1bmN0aW9uIHJlc29sdmVQbGF5ZXJEYXRhKCRxLCAkc3RhdGVQYXJhbXMsIFBva2VTb2NrZXQsIFNvY2tldEV2ZW50KXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9ICRxLmRlZmVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwbGF5ZXJEYXRhQ2IgPSBmdW5jdGlvbiBwbGF5ZXJEYXRhQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKG1lc3NhZ2UpIHx8ICFtZXNzYWdlLnN1Y2Nlc3MgfHwgbWVzc2FnZS50eXBlICE9ICdwbGF5ZXInKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkLnJlc29sdmUoYW5ndWxhci5mcm9tSnNvbihtZXNzYWdlLmRhdGEpKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LlJlcXVlc3QsIHBsYXllckRhdGFDYik7XHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlJlcXVlc3QsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXM6IFsncGxheWVyJ11cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQucHJvbWlzZTtcclxuICAgICAgICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgICAgICAgcGxheWVyU3RhdHNEYXRhOiBbJyRxJywgJyRzdGF0ZVBhcmFtcycsICdQb2tlU29ja2V0JywgJ1NvY2tldEV2ZW50JywgZnVuY3Rpb24gcmVzb2x2ZVBsYXllclN0YXRzRGF0YSgkcSwgJHN0YXRlUGFyYW1zLCBQb2tlU29ja2V0LCBTb2NrZXRFdmVudCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSAkcS5kZWZlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGxheWVyU3RhdHNEYXRhQ2IgPSBmdW5jdGlvbiBwbGF5ZXJTdGF0c0RhdGFDYihtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQobWVzc2FnZSkgfHwgIW1lc3NhZ2Uuc3VjY2VzcyB8fCBtZXNzYWdlLnR5cGUgIT0gJ3BsYXllcl9zdGF0cycpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQucmVzb2x2ZShhbmd1bGFyLmZyb21Kc29uKG1lc3NhZ2UuZGF0YSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQub24oU29ja2V0RXZlbnQuUmVxdWVzdCwgcGxheWVyU3RhdHNEYXRhQ2IpO1xyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5SZXF1ZXN0LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAkc3RhdGVQYXJhbXMudXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVzOiBbJ3BsYXllcl9zdGF0cyddXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgICAgIHBva2Vtb25EYXRhOiBbJyRxJywgJyRzdGF0ZVBhcmFtcycsICdQb2tlU29ja2V0JywgJ1NvY2tldEV2ZW50JywgZnVuY3Rpb24gcmVzb2x2ZVBva2Vtb25EYXRhKCRxLCAkc3RhdGVQYXJhbXMsIFBva2VTb2NrZXQsIFNvY2tldEV2ZW50KXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9ICRxLmRlZmVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwb2tlbW9uRGF0YUNiID0gZnVuY3Rpb24gcG9rZW1vbkRhdGFDYihtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQobWVzc2FnZSkgfHwgIW1lc3NhZ2Uuc3VjY2VzcyB8fCBtZXNzYWdlLnR5cGUgIT0gJ3Bva2Vtb24nKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkLnJlc29sdmUoYW5ndWxhci5mcm9tSnNvbihtZXNzYWdlLmRhdGEpKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LlJlcXVlc3QsIHBva2Vtb25EYXRhQ2IpO1xyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5SZXF1ZXN0LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAkc3RhdGVQYXJhbXMudXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVzOiBbJ3Bva2Vtb24nXVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5wcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgICAgICBhdHRhY2tzRGF0YTogWyckcScsICckc3RhdGVQYXJhbXMnLCAnUG9rZVNvY2tldCcsICdTb2NrZXRFdmVudCcsIGZ1bmN0aW9uIHJlc29sdmVBdHRhY2tzRGF0YSgkcSwgJHN0YXRlUGFyYW1zLCBQb2tlU29ja2V0LCBTb2NrZXRFdmVudCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSAkcS5kZWZlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXR0YWNrc0RhdGFDYiA9IGZ1bmN0aW9uIGF0dGFja3NEYXRhQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKG1lc3NhZ2UpIHx8ICFtZXNzYWdlLnN1Y2Nlc3MgfHwgbWVzc2FnZS50eXBlICE9ICdhdHRhY2tzJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZC5yZXNvbHZlKGFuZ3VsYXIuZnJvbUpzb24obWVzc2FnZS5kYXRhKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5vbihTb2NrZXRFdmVudC5SZXF1ZXN0LCBhdHRhY2tzRGF0YUNiKTtcclxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuUmVxdWVzdCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogJHN0YXRlUGFyYW1zLnVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlczogWydhdHRhY2tzJ11cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQucHJvbWlzZTtcclxuICAgICAgICAgICAgICAgIH1dXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdEYXNoYm9hcmRDb250cm9sbGVyJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0ZXMvZGFzaGJvYXJkL2Rhc2hib2FyZC50cGwuaHRtbCdcclxuICAgICAgICB9KVxyXG4gICAgICAgIDtcclxuICAgIH0pXHJcblxyXG4gICAgLnJ1bihmdW5jdGlvbiAoTmF2aWdhdGlvbikge1xyXG4gICAgICAgIE5hdmlnYXRpb24ucHJpbWFyeS5yZWdpc3RlcihcIlVzZXJzXCIsIFwicHVibGljLnVzZXJzXCIsIDMwLCAnbWQgbWQtZXZlbnQtYXZhaWxhYmxlJywgJ3B1YmxpYy51c2VycycpO1xyXG4gICAgfSlcclxuXHJcbiAgICAuY29udHJvbGxlcignRGFzaGJvYXJkQ29udHJvbGxlcicsIGZ1bmN0aW9uIERhc2hib2FyZENvbnRyb2xsZXIoJHNjb3BlLCAkc3RhdGVQYXJhbXMsICRtZFRvYXN0LCBQb2tlU29ja2V0LCBsZWFmbGV0RGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbkRhdGEsIGludmVudG9yeURhdGEsIHBsYXllckRhdGEsIHBsYXllclN0YXRzRGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2tlbW9uRGF0YSwgYXR0YWNrc0RhdGEsIFNvY2tldEV2ZW50LCBEVE9wdGlvbnNCdWlsZGVyKSB7XHJcblxyXG4gICAgICAgIC8vIEpvaW4gc3BlY2lmaWMgdXNlciByb29tXHJcbiAgICAgICAgLy8gVE9ETzogd2Ugc2hvdWxkIGxlYXZlIHRoZSByb29tIHdoZW4gd2UgY2hhbmdlIHRoZSBwYWdlXHJcbiAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LkpvaW4sIHtyb29tOiAkc3RhdGVQYXJhbXMudXNlcm5hbWV9KTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKFwiSm9pbmVkISBcIiwgU29ja2V0RXZlbnQuSm9pbiwgJHN0YXRlUGFyYW1zLnVzZXJuYW1lKTtcclxuXHJcbiAgICAgICAgLyoqIFRSQU5TRkVSICoqL1xyXG4gICAgICAgIHZhciB0cmFuc2Zlcl9wX2lkO1xyXG4gICAgICAgIHZhciB0cmFuc2ZlckNiID0gZnVuY3Rpb24gdHJhbnNmZXJDYihtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5ldm9sdmVfZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgJHNjb3BlLnRyYW5zZmVyX2Rpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaT0kc2NvcGUucG9rZW1vbi5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wb2tlbW9uW2ldLmlkID09IHRyYW5zZmVyX3BfaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBva2Vtb24uc3BsaWNlKGksMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRyYW5zZmVyX3BfaWQgPSAwO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0LnJlbW92ZUxpc3RlbmVyKFNvY2tldEV2ZW50LlRyYW5zZmVyLCB0cmFuc2ZlckNiKTtcclxuICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRleHRDb250ZW50KG1lc3NhZ2UubWVzc2FnZSlcclxuICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCBjZW50ZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgICRzY29wZS50cmFuc2Zlcl9kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS50cmFuc2ZlciA9IGZ1bmN0aW9uKHBfaWQpIHtcclxuICAgICAgICAgICAgdHJhbnNmZXJfcF9pZCA9IHBfaWQ7XHJcbiAgICAgICAgICAgICRzY29wZS5ldm9sdmVfZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAkc2NvcGUudHJhbnNmZXJfZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LlRyYW5zZmVyLCB0cmFuc2ZlckNiKTtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlRyYW5zZmVyLCB7dXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSwgcF9pZDogcF9pZH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKiBFVk9MVkUgKiovXHJcbiAgICAgICAgdmFyIGV2b2x2ZUNiID0gZnVuY3Rpb24gZXZvbHZlQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZXZvbHZlX2Rpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRzY29wZS50cmFuc2Zlcl9kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0LnJlbW92ZUxpc3RlbmVyKFNvY2tldEV2ZW50LkV2b2x2ZSwgZXZvbHZlQ2IpO1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQobWVzc2FnZS5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbigndG9wIGNlbnRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHNjb3BlLmV2b2x2ZV9kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5ldm9sdmUgPSBmdW5jdGlvbihwX2lkKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5ldm9sdmVfZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAkc2NvcGUudHJhbnNmZXJfZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LkV2b2x2ZSwgZXZvbHZlQ2IpO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuRXZvbHZlLCB7dXNlcm5hbWU6ICRzdGF0ZVBhcmFtcy51c2VybmFtZSwgcF9pZDogcF9pZH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKiBTTklQRSAqKi9cclxuICAgICAgICB2YXIgc25pcGVkQ2IgPSBmdW5jdGlvbiBzbmlwZWRDYihtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIC8vbWVzc2FnZS5zdWNjZXNzO1xyXG4gICAgICAgICAgICAkc2NvcGUuc25pcGVfZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5yZW1vdmVMaXN0ZW5lcihTb2NrZXRFdmVudC5TbmlwZSwgc25pcGVkQ2IpO1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQobWVzc2FnZS5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbigndG9wIGNlbnRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHNjb3BlLnNuaXBlX2Nvb3JkcyA9ICcnO1xyXG4gICAgICAgICRzY29wZS5zbmlwZV9kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5zbmlwZV9hdXRvID0gZmFsc2U7IC8vIG5vdCBpbXBsZW1lbnRlZFxyXG4gICAgICAgICRzY29wZS5zbmlwZSA9IGZ1bmN0aW9uKHNuaXBlX2Nvb3Jkcykge1xyXG4gICAgICAgICAgICAkc2NvcGUuc25pcGVfZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LlNuaXBlLCBzbmlwZWRDYik7XHJcbiAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5TbmlwZSwge3VzZXJuYW1lOiAkc3RhdGVQYXJhbXMudXNlcm5hbWUsIGxhdGxuZzogc25pcGVfY29vcmRzfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAkc2NvcGUuJG9uKCdpbnZlbnRvcnk6dXBkYXRlZCcsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7IFxyXG4gwqAgwqAgwqAgwqAgwqAgwqAkc2NvcGUuaW52ZW50b3J5ID0gZGF0YTtcclxuICAgICAgICAgICAgdXBkYXRlUGVyY2VudGFnZXMoKTtcclxuIMKgIMKgIMKgIMKgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJ3BsYXllcl9zdGF0czp1cGRhdGVkJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcclxuIMKgIMKgIMKgIMKgIMKgIMKgJHNjb3BlLnBsYXllclN0YXRzID0gZGF0YTtcclxuICAgICAgICAgICAgdXBkYXRlUGVyY2VudGFnZXMoKTtcclxuIMKgIMKgIMKgIMKgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJ3BsYXllcjp1cGRhdGVkJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcclxuIMKgIMKgIMKgIMKgIMKgIMKgJHNjb3BlLnBsYXllciA9IGRhdGE7XHJcbiAgICAgICAgICAgIHVwZGF0ZVBlcmNlbnRhZ2VzKCk7XHJcbiDCoCDCoCDCoCDCoH0pO1xyXG5cclxuICAgICAgICAvLyB0aGlzIG1ha2VzIHRoZSBwb2tlbW9uIHRhYmxlIGdvIGNyYXp5IGZvciBhIGJpdFxyXG4gICAgICAgIC8vIHdlIGluc2VydCAvIGRlbGV0ZSBiYXNlZCBvbiBvdGhlciBldmVucywgc28gaXQgX3Nob3VsZF8gYmUgYWNjdXJhdGUgYW55d2F5XHJcbiAgICAgICAgLyokc2NvcGUuJG9uKCdjYXVnaHRfcG9rZW1vbjp1cGRhdGVkJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnBva2Vtb24gPSBkYXRhO1xyXG4gwqAgwqAgwqAgwqB9KTsqL1xyXG4gXHJcbiAgICAgICAgJHNjb3BlLiRvbigncG9rZW1vbjpjYXVnaHQnLCBmdW5jdGlvbihldmVudCwgZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgcG9rZW1vbiA9IGRhdGE7XHJcbiAgICAgICAgICAgIC8vcG9rZW1vbi5jcmVhdGlvbl90aW1lX21zID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiDCoCDCoCDCoCDCoCDCoCDCoCRzY29wZS5wb2tlbW9uLnB1c2gocG9rZW1vbik7XHJcbiAgICAgICAgICAgIHVwZGF0ZVBlcmNlbnRhZ2VzKCk7XHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnQ2F1Z2h0OiAnICsgcG9rZW1vbi5uYW1lICsgJyAoSVY6ICcgKyBNYXRoLmZsb29yKHBva2Vtb24uaXYpICsgJyB8IENQOiAnICsgcG9rZW1vbi5jcCArICcpJylcclxuICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCBjZW50ZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgICAgICAgKTtcclxuIMKgIMKgIMKgIMKgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJ3Bva2Vtb246cmVsZWFzZWQnLCBmdW5jdGlvbihldmVudCwgZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgcG9rZW1vbiA9IGRhdGE7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaT0kc2NvcGUucG9rZW1vbi5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBva2Vtb25baV0uaWQgPT0gcG9rZW1vbi5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wb2tlbW9uLnNwbGljZShpLDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVwZGF0ZVBlcmNlbnRhZ2VzKCk7XHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnUmVsZWFzZWQ6ICcgKyBwb2tlbW9uLm5hbWUgKyAnIChJVjogJyArIE1hdGguZmxvb3IocG9rZW1vbi5pdikgKyAnIHwgQ1A6ICcgKyBwb2tlbW9uLmNwICsgJyknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbigndG9wIGNlbnRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICAgICAgICApO1xyXG4gwqAgwqAgwqAgwqB9KTtcclxuXHJcbiAgICAgICAgJHNjb3BlLiRvbigncG9rZW1vbjpldm9sdmVkJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHBva2Vtb25fb2xkID0gZGF0YS5vbGQ7XHJcbiAgICAgICAgICAgIHZhciBwb2tlbW9uX25ldyA9IGRhdGEubmV3O1xyXG4gICAgICAgICAgICBmb3IodmFyIGk9JHNjb3BlLnBva2Vtb24ubGVuZ3RoLTE7IGk+PTA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wb2tlbW9uW2ldLmlkID09IHBva2Vtb25fb2xkLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBva2Vtb24uc3BsaWNlKGksMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuIMKgIMKgIMKgIMKgIMKgIMKgJHNjb3BlLnBva2Vtb24ucHVzaChwb2tlbW9uX25ldyk7XHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnRXZvbHZlZDogJyArIHBva2Vtb25fb2xkLm5hbWUgKyAnIHRvICcgKyBwb2tlbW9uX25ldy5uYW1lICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJyAoSVY6ICcgKyBNYXRoLmZsb29yKHBva2Vtb25fbmV3Lml2KSArICcgfCBDUDogJyArIHBva2Vtb25fbmV3LmNwICsgJyknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbigndG9wIGNlbnRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICAgICAgICApO1xyXG4gwqAgwqAgwqAgwqB9KTtcclxuXHJcbiAgICAgICAgJHNjb3BlLiRvbignZm9ydDpzcHVuJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcclxuICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRleHRDb250ZW50KCdGb3J0IHNwdW4sIHJld2FyZDogJyArIGRhdGEucmV3YXJkKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbigndG9wIGNlbnRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICAgICAgICApO1xyXG4gwqAgwqAgwqAgwqB9KTtcclxuIFxyXG4gICAgICAgIHZhciBwb3NpdGlvblVwZGF0ZXMgPSAwO1xyXG4gwqAgwqAgwqAgwqAkc2NvcGUuJG9uKCdwb3NpdGlvbjp1cGRhdGUnLCBmdW5jdGlvbihldmVudCwgZGF0YSkge1xyXG4gwqAgwqAgwqAgwqAgwqAgwqBwb3NpdGlvblVwZGF0ZXMrKztcclxuIMKgIMKgIMKgIMKgIMKgIMKgaWYgKHBvc2l0aW9uVXBkYXRlcyAlIDUgPT0gMCkge1xyXG4gwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAkc2NvcGUubWFya2Vycy5ib3QubGF0ID0gZGF0YVswXTtcclxuIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgJHNjb3BlLm1hcmtlcnMuYm90LmxuZyA9IGRhdGFbMV07XHJcbiDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoHZhciBuZXdMb2NhdGlvbiA9IHtsYXQ6IGRhdGFbMF0sIGxuZzogZGF0YVsxXX07XHJcbiDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCRzY29wZS5wYXRocy5tYWluLmxhdGxuZ3MucHVzaChuZXdMb2NhdGlvbik7XHJcbiDCoCDCoCDCoCDCoCDCoCDCoH1cclxuIMKgIMKgIMKgIMKgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS5wbGF5ZXIgPSBwbGF5ZXJEYXRhO1xyXG4gICAgICAgICRzY29wZS5wbGF5ZXJTdGF0cyA9IHBsYXllclN0YXRzRGF0YTtcclxuICAgICAgICAkc2NvcGUuaW52ZW50b3J5ID0gaW52ZW50b3J5RGF0YTtcclxuICAgICAgICAkc2NvcGUucG9rZW1vbiA9IHBva2Vtb25EYXRhO1xyXG4gICAgICAgICRzY29wZS5hdHRhY2tzID0gYXR0YWNrc0RhdGE7XHJcblxyXG4gICAgICAgIHZhciB1cGRhdGVQZXJjZW50YWdlcyA9IGZ1bmN0aW9uIHVwZGF0ZVBlcmNlbnRhZ2VzKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUucGxheWVyU3RhdHMueHBQZXJjZW50ID0gTWF0aC5mbG9vcihcclxuICAgICAgICAgICAgICAgICgkc2NvcGUucGxheWVyU3RhdHMuZXhwZXJpZW5jZSAtICRzY29wZS5wbGF5ZXJTdGF0cy5wcmV2X2xldmVsX3hwKVxyXG4gICAgICAgICAgICAgICAgLygkc2NvcGUucGxheWVyU3RhdHMubmV4dF9sZXZlbF94cCAtICRzY29wZS5wbGF5ZXJTdGF0cy5wcmV2X2xldmVsX3hwKVxyXG4gICAgICAgICAgICAgICAgKjEwMFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAkc2NvcGUucGxheWVyU3RhdHMudW5pcXVlUG9rZWRleFBlcmNlbnQgPSBNYXRoLmZsb29yKCRzY29wZS5wbGF5ZXJTdGF0cy51bmlxdWVfcG9rZWRleF9lbnRyaWVzIC8gMTUxICogMTAwKTtcclxuICAgICAgICAgICAgJHNjb3BlLnBsYXllclN0YXRzLnBva2Vtb25JbnZQZXJjZW50ID0gTWF0aC5mbG9vcigkc2NvcGUucG9rZW1vbi5sZW5ndGggLyAkc2NvcGUucGxheWVyLm1heF9wb2tlbW9uX3N0b3JhZ2UgICogMTAwKTtcclxuICAgICAgICAgICAgJHNjb3BlLnBsYXllclN0YXRzLml0ZW1zSW52UGVyY2VudCA9IE1hdGguZmxvb3IoJHNjb3BlLmludmVudG9yeS5pdGVtX2NvdW50IC8gJHNjb3BlLnBsYXllci5tYXhfaXRlbV9zdG9yYWdlICAqIDEwMCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB1cGRhdGVQZXJjZW50YWdlcygpO1xyXG5cclxuICAgICAgICAvLyB2ZXJ5IGRpcnR5IGZpeCB0byBtYWtlIHRoZSBsZWFmbGV0IG1hcCBsb2FkIGZ1bGxzY3JlZW5cclxuICAgICAgICAkc2NvcGUuJG9uKCckdmlld0NvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbGVhZmxldERhdGEuZ2V0TWFwKCkudGhlbihmdW5jdGlvbihtYXApIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgbWFwLmludmFsaWRhdGVTaXplKCk7IH0sIDMwMDApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkc2NvcGUubWFwID0geyBjZW50ZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhdDogbG9jYXRpb25EYXRhWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG5nOiBsb2NhdGlvbkRhdGFbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOiAxNVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLm1hcmtlcnMgPSB7XHJcbiAgICAgICAgICAgIGJvdDoge1xyXG4gICAgICAgICAgICAgICAgbGF0OiBsb2NhdGlvbkRhdGFbMF0sXHJcbiAgICAgICAgICAgICAgICBsbmc6IGxvY2F0aW9uRGF0YVsxXSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICRzY29wZS5wbGF5ZXIudXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICBmb2N1czogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLnBhdGhzID0ge1xyXG4gICAgICAgICAgICBtYWluOiB7XHJcbiAgICAgICAgICAgICAgICBjb2xvcjogJyNGNDQzMzYnLFxyXG4gICAgICAgICAgICAgICAgd2VpZ2h0OiA0LFxyXG4gICAgICAgICAgICAgICAgbGF0bG5nczogW1xyXG4gICAgICAgICAgICAgICAgICAgIHsgbGF0OiBsb2NhdGlvbkRhdGFbMF0sIGxuZzogbG9jYXRpb25EYXRhWzFdIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLnBva2Vtb25EYXRhVGFibGVPcHRpb25zID0gRFRPcHRpb25zQnVpbGRlci5uZXdPcHRpb25zKClcclxuICAgICAgICAgICAgLndpdGhPcHRpb24oJ29yZGVyJywgW1sgMCwgXCJkZXNjXCIgXV0pXHJcbiAgICAgICAgICAgIC53aXRoT3B0aW9uKCdzdGF0ZVNhdmUnLCB0cnVlKTtcclxuICAgICAgICAgICAgLyoud2l0aE9wdGlvbignc2Nyb2xsWScsICc3NXZoJylcclxuICAgICAgICAgICAgLndpdGhPcHRpb24oJ3Njcm9sbFgnLCB0cnVlKTtcclxuICAgICAgICAgICAgLndpdGhPcHRpb24oJ3BhZ2luZycsIHRydWUpKi9cclxuXHJcbiAgICAgICAgJHNjb3BlLmV4cEx2bE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGFuaW1hdGU6e1xyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246MTAwMCxcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6dHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBiYXJDb2xvcjonIzAzQTlGNCcsXHJcbiAgICAgICAgICAgIHNjYWxlQ29sb3I6ZmFsc2UsXHJcbiAgICAgICAgICAgIGxpbmVXaWR0aDoxMCxcclxuICAgICAgICAgICAgbGluZUNhcDonY2lyY2xlJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS51bmlxdWVQb2tlZGV4T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgYW5pbWF0ZTp7XHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjoxMDAwLFxyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDp0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJhckNvbG9yOicjRkZDMTA3JyxcclxuICAgICAgICAgICAgc2NhbGVDb2xvcjpmYWxzZSxcclxuICAgICAgICAgICAgbGluZVdpZHRoOjEwLFxyXG4gICAgICAgICAgICBsaW5lQ2FwOidjaXJjbGUnXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnBva2Vtb25JbnZPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBhbmltYXRlOntcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOjEwMDAsXHJcbiAgICAgICAgICAgICAgICBlbmFibGVkOnRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYmFyQ29sb3I6JyMwMDk2ODgnLFxyXG4gICAgICAgICAgICBzY2FsZUNvbG9yOmZhbHNlLFxyXG4gICAgICAgICAgICBsaW5lV2lkdGg6MTAsXHJcbiAgICAgICAgICAgIGxpbmVDYXA6J2NpcmNsZSdcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuaXRlbXNJbnZPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBhbmltYXRlOntcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOjEwMDAsXHJcbiAgICAgICAgICAgICAgICBlbmFibGVkOnRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYmFyQ29sb3I6JyNGNDQzMzYnLFxyXG4gICAgICAgICAgICBzY2FsZUNvbG9yOmZhbHNlLFxyXG4gICAgICAgICAgICBsaW5lV2lkdGg6MTAsXHJcbiAgICAgICAgICAgIGxpbmVDYXA6J2NpcmNsZSdcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG5cclxuICAgIH0pXHJcbjtcclxuIiwiYW5ndWxhci5tb2R1bGUoJ1Bva2V0cmFpbmVyLlN0YXRlLlVzZXJzJywgW1xuICAgICd1aS5yb3V0ZXInXG5dKVxuXG4gICAgLmNvbmZpZyhmdW5jdGlvbiBjb25maWcoJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAgICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ3B1YmxpYy51c2VycycsIHtcbiAgICAgICAgICAgIHVybDogJy8nLFxuICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICAgIFVzZXJzOiBbJyRxJywgJyRzdGF0ZVBhcmFtcycsICdQb2tlU29ja2V0JywgJ1NvY2tldEV2ZW50JywgZnVuY3Rpb24gcmVzb2x2ZVVzZXJzKCRxLCAkc3RhdGVQYXJhbXMsIFBva2VTb2NrZXQsIFNvY2tldEV2ZW50KXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciB1c2VyRXZlbnRDYiA9IGZ1bmN0aW9uIHVzZXJFdmVudENiKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQobWVzc2FnZSkgfHwgIW1lc3NhZ2Uuc3VjY2VzcyB8fCAhYW5ndWxhci5pc0FycmF5KG1lc3NhZ2UudXNlcnMpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0LnJlbW92ZUxpc3RlbmVyKFNvY2tldEV2ZW50LlVzZXJMaXN0LCB1c2VyRXZlbnRDYik7XG4gICAgICAgICAgICAgICAgICAgICAgICBkLnJlc29sdmUobWVzc2FnZS51c2Vycyk7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5vbihTb2NrZXRFdmVudC5Vc2VyTGlzdCwgdXNlckV2ZW50Q2IpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEVtaXQgdGhlIGV2ZW50IHRvIG91ciBzb2NrZXRcbiAgICAgICAgICAgICAgICAgICAgLy8gYWZ0ZXIgbGlzdGVuaW5nIGZvciBpdC5cbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgZG9uJ3QgbmVlZCB0byBzaW5jZSB3ZSBjb25uZWN0IGFueXdheSwgYW55IGlzc3Vlcz9cbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgZW5lZCBpdCB0byBnZXQgYmFjayB0byB0aGUgYm90cy1vdmVydmlldz9cbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlVzZXJMaXN0KTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5wcm9taXNlO1xuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1VzZXJzQ29udHJvbGxlcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRlcy91c2Vycy91c2Vycy50cGwuaHRtbCdcbiAgICAgICAgfSlcbiAgICAgICAgO1xuICAgIH0pXG5cbiAgICAucnVuKGZ1bmN0aW9uIChOYXZpZ2F0aW9uKSB7XG4gICAgICAgIE5hdmlnYXRpb24ucHJpbWFyeS5yZWdpc3RlcihcIlVzZXJzXCIsIFwicHVibGljLnVzZXJzXCIsIDMwLCAnbWQgbWQtZXZlbnQtYXZhaWxhYmxlJywgJ3B1YmxpYy51c2VycycpO1xuICAgIH0pXG5cbiAgICAuY29udHJvbGxlcignVXNlcnNDb250cm9sbGVyJywgZnVuY3Rpb24gVXNlcnNDb250cm9sbGVyKCRzY29wZSwgVXNlcnMsIFBva2VTb2NrZXQsIFNvY2tldEV2ZW50KSB7XG4gICAgICAgIC8vIHdlIGRvbid0IG5lZWQgYW55IGRhdGEgZnJvbSB0aGUgZ2xvYmFsIHNjb3BlIGhlcmUuLi4geWV0P1xuICAgICAgICAvL1Bva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5Kb2luLCB7cm9vbTogJ2dsb2JhbCd9KTtcbiAgICAgICAgJHNjb3BlLnVzZXJzID0gVXNlcnM7XG5cbiAgICAgICAgdmFyIHVzZXJFdmVudFVwZGF0ZSA9IGZ1bmN0aW9uIHVzZXJFdmVudFVwZGF0ZShldmVudCwgbWVzc2FnZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUudXNlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnVzZXJzW2ldLnVzZXJuYW1lID09IG1lc3NhZ2UudXNlcm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJzW2ldLnN0YXR1cyA9IG1lc3NhZ2Uuc3RhdHVzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBNYWtlIHN1cmUgdG8gbGlzdGVuIGZvciBuZXcgZXZlbnRzXG4gICAgICAgICRzY29wZS4kb24oU29ja2V0RXZlbnQuX3ByZWZpeCArIFNvY2tldEV2ZW50LlVzZXJTdGF0dXMsIHVzZXJFdmVudFVwZGF0ZSk7XG4gICAgfSlcbjtcbiIsImFuZ3VsYXIubW9kdWxlKCdQb2tldHJhaW5lci5TZXJ2aWNlLk5hdmlnYXRpb24nLCBbXSlcblxuICAgIC5mYWN0b3J5KCdOYXZpZ2F0aW9uJywgZnVuY3Rpb24gTmF2aWdhdGlvbkZhY3RvcnkoKSB7XG4gICAgICAgIHZhciBoZWFkZXJOYXYgPSBbXTtcblxuICAgICAgICB2YXIgZ2V0UHJpbWFyeU1lbnUgPSBmdW5jdGlvbiBnZXRQcmltYXJ5TWVudSgpIHtcbiAgICAgICAgICAgIHJldHVybiBoZWFkZXJOYXYuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgIHZhciBwcmlvcml0eSA9IGEuUHJpb3JpdHkgLSBiLlByaW9yaXR5O1xuXG4gICAgICAgICAgICAgICAgaWYgKHByaW9yaXR5ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhLkxhYmVsLmxvY2FsZUNvbXBhcmUoYi5MYWJlbCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByaW9yaXR5O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciByZWdpc3RlclByaW1hcnlNZW51ID0gZnVuY3Rpb24gcmVnaXN0ZXJQcmltYXJ5TWVudShsYWJlbCwgc3RhdGUsIHByaW9yaXR5LCBpY29uLCBhY3RpdmVTdGF0ZSkge1xuICAgICAgICAgICAgaWYoIHR5cGVvZihpY29uKSAhPT0gXCJzdHJpbmdcIil7XG4gICAgICAgICAgICAgICAgaWNvbiA9IFwibWQgbWQtY2hldnJvbi1yaWdodFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoIHR5cGVvZihhY3RpdmVTdGF0ZSkgIT09IFwic3RyaW5nXCIpe1xuICAgICAgICAgICAgICAgIGFjdGl2ZVN0YXRlID0gc3RhdGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgKHByaW9yaXR5KSAhPT0gXCJudW1iZXJcIiB8fCBwcmlvcml0eSA8IDApIHtcbiAgICAgICAgICAgICAgICBwcmlvcml0eSA9IDEwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBoZWFkZXJOYXYucHVzaCh7XG4gICAgICAgICAgICAgICAgTGFiZWw6IGxhYmVsLFxuICAgICAgICAgICAgICAgIFN0YXRlOiBzdGF0ZSxcbiAgICAgICAgICAgICAgICBBY3RpdmVTdGF0ZTogYWN0aXZlU3RhdGUsXG4gICAgICAgICAgICAgICAgUHJpb3JpdHk6IHByaW9yaXR5LFxuICAgICAgICAgICAgICAgIEljb246IGljb25cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwcmltYXJ5OiB7XG4gICAgICAgICAgICAgICAgZ2V0OiBnZXRQcmltYXJ5TWVudSxcbiAgICAgICAgICAgICAgICByZWdpc3RlcjogcmVnaXN0ZXJQcmltYXJ5TWVudVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
